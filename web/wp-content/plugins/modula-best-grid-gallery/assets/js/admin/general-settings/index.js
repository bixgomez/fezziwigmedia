(()=>{"use strict";var e={162:(e,t,a)=>{var s=a(609),i=a(888),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=i.useSyncExternalStore,o=s.useRef,l=s.useEffect,u=s.useMemo,c=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,s,i){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u((function(){function e(e){if(!l){if(l=!0,r=e,e=s(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return o=t}return o=e}if(t=o,n(r,e))return t;var a=s(e);return void 0!==i&&i(t,a)?(r=e,t):(r=e,o=a)}var r,o,l=!1,u=void 0===a?null:a;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,a,s,i]);var m=r(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=m}),[m]),c(m),m}},242:(e,t,a)=>{e.exports=a(162)},493:(e,t,a)=>{var s=a(609),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=s.useState,r=s.useEffect,o=s.useLayoutEffect,l=s.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!i(e,a)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),s=n({inst:{value:a,getSnapshot:t}}),i=s[0].inst,c=s[1];return o((function(){i.value=a,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,a,t]),r((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(a),a};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},609:e=>{e.exports=window.React},888:(e,t,a)=>{e.exports=a(493)}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=s[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})();var s=a(609);const i=window.wp.element,n=window.wp.components,r="SET_ACTIVE_TAB",o="SET_OPTIONS",l=(e,t)=>{switch(t.type){case r:return{...e,activeTab:t.payload};case o:return{...e,options:t.payload};case"UPDATE_SETTINGS":return{...e,settings:t.payload};case"TOGGLE_ADVANCED_REGISTRATION":return{...e,isAdvancedRegistration:t.payload};case"SET_LOGGED_IN":return{...e,isLoggedIn:t.payload};default:return e}},u={api_key:"",isAdvancedRegistration:!1,isLoggedIn:!1,activeTab:new URL(window.location).searchParams.get("tab")||"display",options:{}},c=(0,i.createContext)(u),d=({children:e})=>{const[t,a]=(0,i.useReducer)(l,u),s={state:t,dispatch:a};return React.createElement(c.Provider,{value:s},e)},h=()=>{const e=(0,i.useContext)(c);if(void 0===e)throw new Error("useStateContext must be used within a SettingsProvider");return e},m=e=>({type:o,payload:e});var f=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},p={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},v=new class{#e=p;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},b="undefined"==typeof window||"Deno"in globalThis;function g(){}function y(e){return"number"==typeof e&&e>=0&&e!==1/0}function E(e,t){return Math.max(e+(t||0)-Date.now(),0)}function S(e,t){return"function"==typeof e?e(t):e}function R(e,t){return"function"==typeof e?e(t):e}function w(e,t){const{type:a="all",exact:s,fetchStatus:i,predicate:n,queryKey:r,stale:o}=e;if(r)if(s){if(t.queryHash!==M(r,t.options))return!1}else if(!F(t.queryKey,r))return!1;if("all"!==a){const e=t.isActive();if("active"===a&&!e)return!1;if("inactive"===a&&e)return!1}return!("boolean"==typeof o&&t.isStale()!==o||i&&i!==t.state.fetchStatus||n&&!n(t))}function C(e,t){const{exact:a,status:s,predicate:i,mutationKey:n}=e;if(n){if(!t.options.mutationKey)return!1;if(a){if(_(t.options.mutationKey)!==_(n))return!1}else if(!F(t.options.mutationKey,n))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function M(e,t){return(t?.queryKeyHashFn||_)(e)}function _(e){return JSON.stringify(e,((e,t)=>A(t)?Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{}):t))}function F(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((a=>F(e[a],t[a])))}var T=Object.prototype.hasOwnProperty;function O(e,t){if(e===t)return e;const a=k(e)&&k(t);if(!(a||A(e)&&A(t)))return t;const s=(a?e:Object.keys(e)).length,i=a?t:Object.keys(t),n=i.length,r=a?new Array(n):{};let o=0;for(let l=0;l<n;l++){const n=a?l:i[l],u=e[n],c=t[n];if(u===c){r[n]=u,(a?l<s:T.call(e,n))&&o++;continue}if(null===u||null===c||"object"!=typeof u||"object"!=typeof c){r[n]=c;continue}const d=O(u,c);r[n]=d,d===u&&o++}return s===n&&o===s?e:r}function I(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}function k(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function A(e){if(!x(e))return!1;const t=e.constructor;if(void 0===t)return!0;const a=t.prototype;return!!x(a)&&!!a.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function x(e){return"[object Object]"===Object.prototype.toString.call(e)}function V(e,t,a){return"function"==typeof a.structuralSharing?a.structuralSharing(e,t):!1!==a.structuralSharing?O(e,t):t}function L(e,t,a=0){const s=[...e,t];return a&&s.length>a?s.slice(1):s}function D(e,t,a=0){const s=[t,...e];return a&&s.length>a?s.slice(0,-1):s}var N=Symbol();function P(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==N?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function q(e,t){return"function"==typeof e?e(...t):!!e}var j=new class extends f{#a;#s;#i;constructor(){super(),this.#i=e=>{if(!b&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#s||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#i=e,this.#s?.(),this.#s=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#a!==e&&(this.#a=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#a?this.#a:"hidden"!==globalThis.document?.visibilityState}},B=function(e){setTimeout(e,0)},Q=function(){let e=[],t=0,a=e=>{e()},s=e=>{e()},i=B;const n=s=>{t?e.push(s):i((()=>{a(s)}))};return{batch:n=>{let r;t++;try{r=n()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{s((()=>{t.forEach((e=>{a(e)}))}))}))})()}return r},batchCalls:e=>(...t)=>{n((()=>{e(...t)}))},schedule:n,setNotifyFunction:e=>{a=e},setBatchNotifyFunction:e=>{s=e},setScheduler:e=>{i=e}}}(),G=new class extends f{#n=!0;#s;#i;constructor(){super(),this.#i=e=>{if(!b&&window.addEventListener){const t=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#s||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#s?.(),this.#s=void 0)}setEventListener(e){this.#i=e,this.#s?.(),this.#s=e(this.setOnline.bind(this))}setOnline(e){this.#n!==e&&(this.#n=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#n}};function $(){let e,t;const a=new Promise(((a,s)=>{e=a,t=s}));function s(e){Object.assign(a,e),delete a.resolve,delete a.reject}return a.status="pending",a.catch((()=>{})),a.resolve=t=>{s({status:"fulfilled",value:t}),e(t)},a.reject=e=>{s({status:"rejected",reason:e}),t(e)},a}function U(e){return Math.min(1e3*2**e,3e4)}function K(e){return"online"!==(e??"online")||G.isOnline()}var H=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function z(e){let t,a=!1,s=0;const i=$(),n=()=>"pending"!==i.status,r=()=>j.isFocused()&&("always"===e.networkMode||G.isOnline())&&e.canRun(),o=()=>K(e.networkMode)&&e.canRun(),l=e=>{n()||(t?.(),i.resolve(e))},u=e=>{n()||(t?.(),i.reject(e))},c=()=>new Promise((a=>{t=e=>{(n()||r())&&a(e)},e.onPause?.()})).then((()=>{t=void 0,n()||e.onContinue?.()})),d=()=>{if(n())return;let t;const i=0===s?e.initialPromise:void 0;try{t=i??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(l).catch((t=>{if(n())return;const i=e.retry??(b?0:3),o=e.retryDelay??U,l="function"==typeof o?o(s,t):o,h=!0===i||"number"==typeof i&&s<i||"function"==typeof i&&i(s,t);var m;!a&&h?(s++,e.onFail?.(s,t),(m=l,new Promise((e=>{v.setTimeout(e,m)}))).then((()=>r()?void 0:c())).then((()=>{a?u(t):d()}))):u(t)}))};return{promise:i,status:()=>i.status,cancel:t=>{if(!n()){const a=new H(t);u(a),e.onCancel?.(a)}},continue:()=>(t?.(),i),cancelRetry:()=>{a=!0},continueRetry:()=>{a=!1},canStart:o,start:()=>(o()?d():c().then(d),i)}}var W=class{#r;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),y(this.gcTime)&&(this.#r=v.setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(b?1/0:3e5))}clearGcTimeout(){this.#r&&(v.clearTimeout(this.#r),this.#r=void 0)}},Y=class extends W{#o;#l;#u;#c;#d;#h;#m;constructor(e){super(),this.#m=!1,this.#h=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#c=e.client,this.#u=this.#c.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=Z(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#d?.promise}setOptions(e){if(this.options={...this.#h,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Z(this.options);void 0!==e.data&&(this.setState(X(e.data,e.dataUpdatedAt)),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#u.remove(this)}setData(e,t){const a=V(this.state.data,e,this.options);return this.#f({data:a,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),a}setState(e,t){this.#f({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#d?.promise;return this.#d?.cancel(e),t?t.then(g).catch(g):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some((e=>!1!==R(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===N||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some((e=>"static"===S(e.options.staleTime,this)))}isStale(){return this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!E(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#d?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#d?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#u.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#d&&(this.#m?this.#d.cancel({revert:!0}):this.#d.cancelRetry()),this.scheduleGc()),this.#u.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#f({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#d?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#d)return this.#d.continueRetry(),this.#d.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const a=new AbortController,s=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#m=!0,a.signal)})},i=()=>{const e=P(this.options,t),a=(()=>{const e={client:this.#c,queryKey:this.queryKey,meta:this.meta};return s(e),e})();return this.#m=!1,this.options.persister?this.options.persister(e,a,this):e(a)},n=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#c,state:this.state,fetchFn:i};return s(e),e})();this.options.behavior?.onFetch(n,this),this.#l=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===n.fetchOptions?.meta||this.#f({type:"fetch",meta:n.fetchOptions?.meta}),this.#d=z({initialPromise:t?.initialPromise,fn:n.fetchFn,onCancel:e=>{e instanceof H&&e.revert&&this.setState({...this.#l,fetchStatus:"idle"}),a.abort()},onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:()=>{this.#f({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0});try{const e=await this.#d.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#u.config.onSuccess?.(e,this),this.#u.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof H){if(e.silent)return this.#d.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#f({type:"error",error:e}),this.#u.config.onError?.(e,this),this.#u.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...J(t.data,this.options),fetchMeta:e.meta??null};case"success":const a={...t,...X(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#l=e.manual?a:void 0,a;case"error":const s=e.error;return{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Q.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#u.notify({query:this,type:"updated",action:e})}))}};function J(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:K(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function X(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Z(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,a=void 0!==t,s=a?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var ee=class extends f{constructor(e,t){super(),this.options=t,this.#c=e,this.#p=null,this.#v=$(),this.bindMethods(),this.setOptions(t)}#c;#b=void 0;#g=void 0;#y=void 0;#E;#S;#v;#p;#R;#w;#C;#M;#_;#F;#T=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#b.addObserver(this),te(this.#b,this.options)?this.#O():this.updateResult(),this.#I())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ae(this.#b,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ae(this.#b,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#k(),this.#A(),this.#b.removeObserver(this)}setOptions(e){const t=this.options,a=this.#b;if(this.options=this.#c.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof R(this.options.enabled,this.#b))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#b.setOptions(this.options),t._defaulted&&!I(this.options,t)&&this.#c.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#b,observer:this});const s=this.hasListeners();s&&se(this.#b,a,this.options,t)&&this.#O(),this.updateResult(),!s||this.#b===a&&R(this.options.enabled,this.#b)===R(t.enabled,this.#b)&&S(this.options.staleTime,this.#b)===S(t.staleTime,this.#b)||this.#V();const i=this.#L();!s||this.#b===a&&R(this.options.enabled,this.#b)===R(t.enabled,this.#b)&&i===this.#F||this.#D(i)}getOptimisticResult(e){const t=this.#c.getQueryCache().build(this.#c,e),a=this.createResult(t,e);return s=a,!I(this.getCurrentResult(),s)&&(this.#y=a,this.#S=this.options,this.#E=this.#b.state),a;var s}getCurrentResult(){return this.#y}trackResult(e,t){return new Proxy(e,{get:(e,a)=>(this.trackProp(a),t?.(a),"promise"===a&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#v.status||this.#v.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,a))})}trackProp(e){this.#T.add(e)}getCurrentQuery(){return this.#b}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#c.defaultQueryOptions(e),a=this.#c.getQueryCache().build(this.#c,t);return a.fetch().then((()=>this.createResult(a,t)))}fetch(e){return this.#O({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#y)))}#O(e){this.#x();let t=this.#b.fetch(this.options,e);return e?.throwOnError||(t=t.catch(g)),t}#V(){this.#k();const e=S(this.options.staleTime,this.#b);if(b||this.#y.isStale||!y(e))return;const t=E(this.#y.dataUpdatedAt,e)+1;this.#M=v.setTimeout((()=>{this.#y.isStale||this.updateResult()}),t)}#L(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#b):this.options.refetchInterval)??!1}#D(e){this.#A(),this.#F=e,!b&&!1!==R(this.options.enabled,this.#b)&&y(this.#F)&&0!==this.#F&&(this.#_=v.setInterval((()=>{(this.options.refetchIntervalInBackground||j.isFocused())&&this.#O()}),this.#F))}#I(){this.#V(),this.#D(this.#L())}#k(){this.#M&&(v.clearTimeout(this.#M),this.#M=void 0)}#A(){this.#_&&(v.clearInterval(this.#_),this.#_=void 0)}createResult(e,t){const a=this.#b,s=this.options,i=this.#y,n=this.#E,r=this.#S,o=e!==a?e.state:this.#g,{state:l}=e;let u,c={...l},d=!1;if(t._optimisticResults){const i=this.hasListeners(),n=!i&&te(e,t),r=i&&se(e,a,t,s);(n||r)&&(c={...c,...J(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(c.fetchStatus="idle")}let{error:h,errorUpdatedAt:m,status:f}=c;u=c.data;let p=!1;if(void 0!==t.placeholderData&&void 0===u&&"pending"===f){let e;i?.isPlaceholderData&&t.placeholderData===r?.placeholderData?(e=i.data,p=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#C?.state.data,this.#C):t.placeholderData,void 0!==e&&(f="success",u=V(i?.data,e,t),d=!0)}if(t.select&&void 0!==u&&!p)if(i&&u===n?.data&&t.select===this.#R)u=this.#w;else try{this.#R=t.select,u=t.select(u),u=V(i?.data,u,t),this.#w=u,this.#p=null}catch(e){this.#p=e}this.#p&&(h=this.#p,u=this.#w,m=Date.now(),f="error");const v="fetching"===c.fetchStatus,b="pending"===f,g="error"===f,y=b&&v,E=void 0!==u,S={status:f,fetchStatus:c.fetchStatus,isPending:b,isSuccess:"success"===f,isError:g,isInitialLoading:y,isLoading:y,data:u,dataUpdatedAt:c.dataUpdatedAt,error:h,errorUpdatedAt:m,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>o.dataUpdateCount||c.errorUpdateCount>o.errorUpdateCount,isFetching:v,isRefetching:v&&!b,isLoadingError:g&&!E,isPaused:"paused"===c.fetchStatus,isPlaceholderData:d,isRefetchError:g&&E,isStale:ie(e,t),refetch:this.refetch,promise:this.#v,isEnabled:!1!==R(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===S.status?e.reject(S.error):void 0!==S.data&&e.resolve(S.data)},s=()=>{const e=this.#v=S.promise=$();t(e)},i=this.#v;switch(i.status){case"pending":e.queryHash===a.queryHash&&t(i);break;case"fulfilled":"error"!==S.status&&S.data===i.value||s();break;case"rejected":"error"===S.status&&S.error===i.reason||s()}}return S}updateResult(){const e=this.#y,t=this.createResult(this.#b,this.options);this.#E=this.#b.state,this.#S=this.options,void 0!==this.#E.data&&(this.#C=this.#b),I(t,e)||(this.#y=t,this.#N({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,a="function"==typeof t?t():t;if("all"===a||!a&&!this.#T.size)return!0;const s=new Set(a??this.#T);return this.options.throwOnError&&s.add("error"),Object.keys(this.#y).some((t=>{const a=t;return this.#y[a]!==e[a]&&s.has(a)}))})()}))}#x(){const e=this.#c.getQueryCache().build(this.#c,this.options);if(e===this.#b)return;const t=this.#b;this.#b=e,this.#g=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#I()}#N(e){Q.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#y)})),this.#c.getQueryCache().notify({query:this.#b,type:"observerResultsUpdated"})}))}};function te(e,t){return function(e,t){return!1!==R(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&ae(e,t,t.refetchOnMount)}function ae(e,t,a){if(!1!==R(t.enabled,e)&&"static"!==S(t.staleTime,e)){const s="function"==typeof a?a(e):a;return"always"===s||!1!==s&&ie(e,t)}return!1}function se(e,t,a,s){return(e!==t||!1===R(s.enabled,e))&&(!a.suspense||"error"!==e.state.status)&&ie(e,a)}function ie(e,t){return!1!==R(t.enabled,e)&&e.isStaleByTime(S(t.staleTime,e))}const ne=window.ReactJSXRuntime;var re=s.createContext(void 0),oe=e=>{const t=s.useContext(re);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},le=({client:e,children:t})=>(s.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,ne.jsx)(re.Provider,{value:e,children:t}));var ue=s.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),ce=s.createContext(!1),de=(ce.Provider,(e,t,a)=>t.fetchOptimistic(e).catch((()=>{a.clearReset()})));function he(e,t){return function(e,t,a){const i=s.useContext(ce),n=s.useContext(ue),r=oe(a),o=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=i?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,a=e=>"static"===e?e:Math.max(e??t,t),s=e.staleTime;e.staleTime="function"==typeof s?(...e)=>a(s(...e)):a(s),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(o),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(o,n),(e=>{s.useEffect((()=>{e.clearReset()}),[e])})(n);const l=!r.getQueryCache().get(o.queryHash),[u]=s.useState((()=>new t(r,o))),c=u.getOptimisticResult(o),d=!i&&!1!==e.subscribed;if(s.useSyncExternalStore(s.useCallback((e=>{const t=d?u.subscribe(Q.batchCalls(e)):g;return u.updateResult(),t}),[u,d]),(()=>u.getCurrentResult()),(()=>u.getCurrentResult())),s.useEffect((()=>{u.setOptions(o)}),[o,u]),((e,t)=>e?.suspense&&t.isPending)(o,c))throw de(o,u,n);if((({result:e,errorResetBoundary:t,throwOnError:a,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&void 0===e.data||q(a,[e.error,s])))({result:c,errorResetBoundary:n,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if(r.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.experimental_prefetchInRender&&!b&&((e,t)=>e.isLoading&&e.isFetching&&!t)(c,i)){const e=l?de(o,u,n):r.getQueryCache().get(o.queryHash)?.promise;e?.catch(g).finally((()=>{u.updateResult()}))}return o.notifyOnChangeProps?c:u.trackResult(c)}(e,ee,t)}const me=window.wp.apiFetch;var fe=a.n(me);const pe=()=>he({queryKey:["settings-tabs-query"],retry:1,queryFn:async()=>await fe()({path:"/modula-best-grid-gallery/v1/general-settings-tabs",method:"GET"})});function ve(){const{state:e,dispatch:t}=h(),{data:a,isLoading:s}=pe(),o=(0,i.useCallback)((e=>{if(window&&window.history&&window.location){const t=new URL(window.location);t.searchParams.set("tab",e),window.history.replaceState({},"",t)}t({type:r,payload:e})}),[t]);if("undefined"!==a&&!s)return React.createElement("div",{className:"eHtPTGt_EQMZg2JNC07x"},a.map((({label:t,slug:a,type:s="button",target:i=!1})=>{const r="link"===s;return React.createElement(n.Button,{key:a,href:r?a:void 0,target:r&&i?"_blank":void 0,rel:r&&i?"noopener noreferrer":void 0,onClick:()=>o(a),className:"qMbQ1QJL_OukvbQKQfpU "+(e.activeTab===a?"RVLmrCAMrV9AzshKV7FJ":"")},t)})))}function be(e,t){return"function"==typeof e?e(t):e}function ge(e,t){return Fe(t).reduce(((e,t)=>null===e?null:void 0!==e?e[t]:void 0),e)}function ye(e,t,a){const s=Fe(t);return function e(t){if(!s.length)return be(a,t);const i=s.shift();if("string"==typeof i||"number"==typeof i&&!Array.isArray(t))return"object"==typeof t?(null===t&&(t={}),{...t,[i]:e(t[i])}):{[i]:e()};if(Array.isArray(t)&&"number"==typeof i){const a=t.slice(0,i);return[...a.length?a:new Array(i),e(t[i]),...t.slice(i+1)]}return[...new Array(i),e()]}(e)}const Ee=/^(\d+)$/gm,Se=/\.(\d+)(?=\.)/gm,Re=/^(\d+)\./gm,we=/\.(\d+$)/gm,Ce=/\.{2,}/gm,Me="__int__",_e=`${Me}$1`;function Fe(e){if(Array.isArray(e))return[...e];if("string"!=typeof e)throw new Error("Path must be a string.");return e.replace(/(^\[)|]/gm,"").replace(/\[/g,".").replace(Ee,_e).replace(Se,`.${_e}.`).replace(Re,`${_e}.`).replace(we,`.${_e}`).replace(Ce,".").split(".").map((e=>{if(e.startsWith(Me)){const t=e.substring(Me.length),a=parseInt(t,10);return String(a)===t?a:t}return e}))}function Te(e,t){return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!1},runValidation:e=>e.validators.filter(Boolean).map((e=>({cause:e.cause,validate:e.fn})))})}function Oe(e,t){const{asyncDebounceMs:a}=t,{onBlurAsyncDebounceMs:s,onChangeAsyncDebounceMs:i,onDynamicAsyncDebounceMs:n}=t.validators||{},r=a??0;return t.validationLogic({form:t.form,validators:t.validators,event:{type:e,async:!0},runValidation:t=>t.validators.filter(Boolean).map((t=>{const a=t?.cause||e;let o=r;switch(a){case"change":o=i??r;break;case"blur":o=s??r;break;case"dynamic":o=n??r;break;case"submit":o=0}return"submit"===e&&(o=0),{cause:a,validate:t.fn,debounceMs:o}}))})}const Ie=e=>!!e&&"object"==typeof e&&"fields"in e;function ke(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,s]of e)if(!t.has(a)||!Object.is(s,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(const i of a)if(!s.includes(i)||!ke(e[i],t[i]))return!1;return!0}const Ae=({newFormValidatorError:e,isPreviousErrorFromFormValidator:t,previousErrorValue:a})=>e?{newErrorValue:e,newSource:"form"}:t?{newErrorValue:void 0,newSource:void 0}:a?{newErrorValue:a,newSource:"field"}:{newErrorValue:void 0,newSource:void 0},xe=({formLevelError:e,fieldLevelError:t})=>t?{newErrorValue:t,newSource:"field"}:e?{newErrorValue:e,newSource:"form"}:{newErrorValue:void 0,newSource:void 0};function Ve(e,t){return null==e?t:{...e,...t}}let Le=256;const De=[];let Ne;for(;Le--;)De[Le]=(Le+256).toString(16).substring(1);class Pe{constructor(e,t){this.listeners=new Set,this.subscribe=e=>{var t,a;this.listeners.add(e);const s=null==(a=null==(t=this.options)?void 0:t.onSubscribe)?void 0:a.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.prevState=e,this.state=e,this.options=t}setState(e){var t,a,s;this.prevState=this.state,(null==(t=this.options)?void 0:t.updateFn)?this.state=this.options.updateFn(this.prevState)(e):function(e){return"function"==typeof e}(e)?this.state=e(this.prevState):this.state=e,null==(s=null==(a=this.options)?void 0:a.onUpdate)||s.call(a),Ye(this)}}class qe{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=this.options.deps.length,t=new Array(e),a=new Array(e);for(let s=0;s<e;s++){const e=this.options.deps[s];t[s]=e.prevState,a[s]=e.state}return this.lastSeenDepValues=a,{prevDepVals:t,currDepVals:a,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,t;this.prevState=this.state;const a=this.getDepVals();this.state=this.options.fn(a),null==(t=(e=this.options).onUpdate)||t.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const e of this.options.deps)e instanceof qe&&e.checkIfRecalculationNeededDeeply();let e=!1;const t=this.lastSeenDepValues,{currDepVals:a}=this.getDepVals();for(let s=0;s<a.length;s++)if(a[s]!==t[s]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var t,a;this.listeners.add(e);const s=null==(a=(t=this.options).onSubscribe)?void 0:a.call(t,e,this);return()=>{this.listeners.delete(e),null==s||s()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const t of e)if(t instanceof qe)t.registerOnGraph(),this.registerOnGraph(t.options.deps);else if(t instanceof Pe){let e=je.get(t);e||(e=new Set,je.set(t,e)),e.add(this);let a=Be.get(this);a||(a=new Set,Be.set(this,a)),a.add(t)}}unregisterFromGraph(e=this.options.deps){for(const t of e)if(t instanceof qe)this.unregisterFromGraph(t.options.deps);else if(t instanceof Pe){const e=je.get(t);e&&e.delete(this);const a=Be.get(this);a&&a.delete(t)}}}const je=new WeakMap,Be=new WeakMap,Qe={current:[]};let Ge=!1,$e=0;const Ue=new Set,Ke=new Map;function He(e){const t=Array.from(e).sort(((e,t)=>e instanceof qe&&e.options.deps.includes(t)?1:t instanceof qe&&t.options.deps.includes(e)?-1:0));for(const e of t){if(Qe.current.includes(e))continue;Qe.current.push(e),e.recompute();const t=Be.get(e);if(t)for(const e of t){const t=je.get(e);t&&He(t)}}}function ze(e){const t={prevVal:e.prevState,currentVal:e.state};for(const a of e.listeners)a(t)}function We(e){const t={prevVal:e.prevState,currentVal:e.state};for(const a of e.listeners)a(t)}function Ye(e){if($e>0&&!Ke.has(e)&&Ke.set(e,e.prevState),Ue.add(e),!($e>0||Ge))try{for(Ge=!0;Ue.size>0;){const e=Array.from(Ue);Ue.clear();for(const t of e){const e=Ke.get(t)??t.prevState;t.prevState=e,ze(t)}for(const t of e){const e=je.get(t);e&&(Qe.current.push(t),He(e))}for(const t of e){const e=je.get(t);if(e)for(const t of e)We(t)}}}finally{Ge=!1,Qe.current=[],Ke.clear()}}function Je(e){$e++;try{e()}finally{if($e--,0===$e){const e=Ue.values().next().value;e&&Ye(e)}}}function Xe(e,...t){return function(e){return"function"==typeof e}(e)?e(...t):e}class Ze{#P=!0;#q;#j;#B;#Q;#G;#$;#U;#K=0;#H=5;#z=!1;#W=()=>{this.debugLog("Connected to event bus"),this.#G=!0,this.#z=!1,this.debugLog("Emitting queued events",this.#Q),this.#Q.forEach((e=>this.emitEventToBus(e))),this.#Q=[],this.stopConnectLoop(),this.#j().removeEventListener("tanstack-connect-success",this.#W)};#Y=()=>{if(this.#K<this.#H)return this.#K++,void this.dispatchCustomEvent("tanstack-connect",{});this.#j().removeEventListener("tanstack-connect",this.#Y),this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};#J=()=>{this.#z||(this.#z=!0,this.#j().addEventListener("tanstack-connect-success",this.#W),this.#Y())};constructor({pluginId:e,debug:t=!1,enabled:a=!0,reconnectEveryMs:s=300}){this.#q=e,this.#P=a,this.#j=this.getGlobalTarget,this.#B=t,this.debugLog(" Initializing event subscription for plugin",this.#q),this.#Q=[],this.#G=!1,this.#$=null,this.#U=s}startConnectLoop(){null!==this.#$||this.#G||(this.debugLog(`Starting connect loop (every ${this.#U}ms)`),this.#$=setInterval(this.#Y,this.#U))}stopConnectLoop(){this.#z=!1,null!==this.#$&&(clearInterval(this.#$),this.#$=null,this.debugLog("Stopped connect loop"))}debugLog(...e){this.#B&&console.log(`ðŸŒ´ [tanstack-devtools:${this.#q}-plugin]`,...e)}getGlobalTarget(){if("undefined"!=typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if("undefined"!=typeof window&&void 0!==window.addEventListener)return this.debugLog("Using window as event target"),window;const e="undefined"!=typeof EventTarget?new EventTarget:void 0;return void 0===e||void 0===e.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#q}dispatchCustomEventShim(e,t){try{const a=new Event(e,{detail:t});this.#j().dispatchEvent(a)}catch(e){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,t){try{this.#j().dispatchEvent(new CustomEvent(e,{detail:t}))}catch(a){this.dispatchCustomEventShim(e,t)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}emit(e,t){if(this.#P)return this.#G?this.emitEventToBus({type:`${this.#q}:${e}`,payload:t,pluginId:this.#q}):(this.debugLog("Bus not available, will be pushed as soon as connected"),this.#Q.push({type:`${this.#q}:${e}`,payload:t,pluginId:this.#q}),void("undefined"==typeof CustomEvent||this.#z||(this.#J(),this.startConnectLoop())));this.debugLog("Event bus client is disabled, not emitting event",e,t)}on(e,t){const a=`${this.#q}:${e}`;if(!this.#P)return this.debugLog("Event bus client is disabled, not registering event",a),()=>{};const s=e=>{this.debugLog("Received event from bus",e.detail),t(e.detail)};return this.#j().addEventListener(a,s),this.debugLog("Registered event to bus",a),()=>{this.#j().removeEventListener(a,s)}}onAll(e){if(!this.#P)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const t=t=>{const a=t.detail;e(a)};return this.#j().addEventListener("tanstack-devtools-global",t),()=>this.#j().removeEventListener("tanstack-devtools-global",t)}onAllPluginEvents(e){if(!this.#P)return this.debugLog("Event bus client is disabled, not registering event"),()=>{};const t=t=>{const a=t.detail;this.#q&&a.pluginId!==this.#q||e(a)};return this.#j().addEventListener("tanstack-devtools-global",t),()=>this.#j().removeEventListener("tanstack-devtools-global",t)}}const et=new class extends Ze{constructor(e){super({pluginId:"pacer",debug:e?.debug})}},tt={enabled:!0,leading:!0,trailing:!0,wait:0};class at{constructor(e,t){this.fn=e,this.store=new Pe({executionCount:0,isPending:!1,lastArgs:void 0,lastExecutionTime:0,nextExecutionTime:0,status:"idle",maybeExecuteCount:0}),this.setOptions=e=>{this.options={...this.options,...e},this.#X()||this.cancel()},this.#Z=e=>{this.store.setState((t=>{const a={...t,...e},{isPending:s}=a;return{...a,status:this.#X()?s?"pending":"idle":"disabled"}})),et.emit("Throttler",this)},this.#X=()=>!!Xe(this.options.enabled,this),this.#ee=()=>Xe(this.options.wait,this),this.maybeExecute=(...e)=>{this.#Z({maybeExecuteCount:this.store.state.maybeExecuteCount+1});const t=Date.now(),a=t-this.store.state.lastExecutionTime,s=this.#ee();if(this.options.leading&&a>=s)this.#te(...e);else if(this.#Z({lastArgs:e}),!this.#ae&&this.options.trailing){const e=s-(this.store.state.lastExecutionTime?t-this.store.state.lastExecutionTime:0);this.#Z({isPending:!0}),this.#ae=setTimeout((()=>{const{lastArgs:e}=this.store.state;void 0!==e&&this.#te(...e)}),e)}},this.#te=(...e)=>{if(!this.#X())return;this.fn(...e);const t=Date.now(),a=t+this.#ee();this.#se(),this.#Z({executionCount:this.store.state.executionCount+1,lastExecutionTime:t,nextExecutionTime:a,isPending:!1,lastArgs:void 0}),this.options.onExecute?.(e,this),setTimeout((()=>{this.store.state.isPending||this.#Z({nextExecutionTime:void 0})}),this.#ee())},this.flush=()=>{this.store.state.isPending&&this.store.state.lastArgs&&this.#te(...this.store.state.lastArgs)},this.#se=()=>{this.#ae&&(clearTimeout(this.#ae),this.#ae=void 0)},this.cancel=()=>{this.#se(),this.#Z({lastArgs:void 0,isPending:!1})},this.reset=()=>{this.#Z({executionCount:0,isPending:!1,lastArgs:void 0,lastExecutionTime:0,nextExecutionTime:0,status:"idle",maybeExecuteCount:0})},this.key=t.key||("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():""),this.options={...tt,...t},this.#Z(this.options.initialState??{}),et.on("d-Throttler",(e=>{e.payload.key===this.key&&(this.#Z(e.payload.store.state),this.setOptions(e.payload.options))}))}#ae;#Z;#X;#ee;#te;#se}const st=e=>{if(!e.validators)return e.runValidation({validators:[],form:e.form});const t=e.event.async,a=t?void 0:{fn:e.validators.onMount,cause:"mount"},s={fn:t?e.validators.onChangeAsync:e.validators.onChange,cause:"change"},i={fn:t?e.validators.onBlurAsync:e.validators.onBlur,cause:"blur"},n={fn:t?e.validators.onSubmitAsync:e.validators.onSubmit,cause:"submit"},r=t?void 0:{fn:()=>{},cause:"server"};switch(e.event.type){case"mount":return e.runValidation({validators:[a],form:e.form});case"submit":return e.runValidation({validators:[s,i,n,r],form:e.form});case"server":return e.runValidation({validators:[],form:e.form});case"blur":return e.runValidation({validators:[i,r],form:e.form});case"change":return e.runValidation({validators:[s,r],form:e.form});default:throw new Error(`Unknown validation event type: ${e.event.type}`)}},it=(e,t)=>{const a=function(e,t){const a=new Map;for(const s of e){const e=s.path??[];let i=t,n="";for(let t=0;t<e.length;t++){const a=e[t];if(void 0===a)continue;const s="object"==typeof a?a.key:a,r=Number(s);Array.isArray(i)&&!Number.isNaN(r)?n+=`[${r}]`:n+=(t>0?".":"")+String(s),i="object"==typeof i&&null!==i?i[s]:void 0}a.set(n,(a.get(n)??[]).concat(s))}return Object.fromEntries(a)}(e,t);return{form:a,fields:a}},nt={validate({value:e,validationSource:t},a){const s=a["~standard"].validate(e);if(s instanceof Promise)throw new Error("async function passed to sync validator");if(s.issues)return"field"===t?s.issues:it(s.issues,e)},async validateAsync({value:e,validationSource:t},a){const s=await a["~standard"].validate(e);if(s.issues)return"field"===t?s.issues:it(s.issues,e)}},rt=e=>!!e&&"~standard"in e,ot={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,isValid:!0,isDefaultValue:!0,errors:[],errorMap:{},errorSourceMap:{}};function lt(e){function t(e,t){return`${e}[${t}]`}function a(a,s,i,n){const r=[t(a,s)];switch(i){case"swap":r.push(t(a,n));break;case"move":{const[e,i]=[Math.min(s,n),Math.max(s,n)];for(let s=e;s<=i;s++)r.push(t(a,s));break}default:{const i=e.getFieldValue(a),n=Array.isArray(i)?i.length:0;for(let e=s+1;e<n;e++)r.push(t(a,e));break}}return Object.keys(e.fieldInfo).filter((e=>r.some((t=>e.startsWith(t)))))}function s(t,a){("up"===a?t:[...t].reverse()).forEach((t=>{const s=function(e,t){return e.replace(/\[(\d+)\]/,((e,a)=>{const s=parseInt(a,10);return`[${"up"===t?s+1:Math.max(0,s-1)}]`}))}(t.toString(),a),n=e.getFieldMeta(s);n?e.setFieldMeta(t,n):e.setFieldMeta(t,i())}))}const i=()=>ot;return{handleArrayMove:function(i,n,r){const o=a(i,n,"move",r),l=Math.min(n,r),u=Math.max(n,r);for(let e=l;e<=u;e++)o.push(t(i,e));const c=Object.keys(e.fieldInfo).reduce(((a,s)=>(s.startsWith(t(i,n))&&a.set(s,e.getFieldMeta(s)),a)),new Map);s(o,n<r?"up":"down"),Object.keys(e.fieldInfo).filter((e=>e.startsWith(t(i,r)))).forEach((a=>{const s=a.replace(t(i,r),t(i,n)),o=c.get(s);o&&e.setFieldMeta(a,o)}))},handleArrayRemove:function(e,t){s(a(e,t,"remove"),"up")},handleArraySwap:function(s,i,n){a(s,i,"swap",n).forEach((a=>{if(!a.toString().startsWith(t(s,i)))return;const r=a.toString().replace(t(s,i),t(s,n)),[o,l]=[e.getFieldMeta(a),e.getFieldMeta(r)];o&&e.setFieldMeta(r,o),l&&e.setFieldMeta(a,l)}))},handleArrayInsert:function(n,r){const o=a(n,r,"insert");s(o,"down"),o.forEach((a=>{a.toString().startsWith(t(n,r))&&e.setFieldMeta(a,i())}))}}}const ut=new class extends Ze{constructor(){super({pluginId:"form-devtools",reconnectEveryMs:1e3})}};function ct(e){return{values:e.values??{},errorMap:e.errorMap??{},fieldMetaBase:e.fieldMetaBase??{},isSubmitted:e.isSubmitted??!1,isSubmitting:e.isSubmitting??!1,isValidating:e.isValidating??!1,submissionAttempts:e.submissionAttempts??0,isSubmitSuccessful:e.isSubmitSuccessful??!1,validationMetaMap:e.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}}}class dt{constructor(e){this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const e=this.fieldMetaDerived.mount(),t=this.store.mount(),a=()=>{e(),t(),ut.emit("form-unmounted",{id:this._formId})};this.options.listeners?.onMount?.({formApi:this});const{onMount:s}=this.options.validators||{};return ut.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}),s?(this.validateSync("mount"),a):a},this.update=e=>{if(!e)return;const t=this.options;this.options=e;const a=!!e.transform?.deps?.some(((e,t)=>e!==this.prevTransformArray[t])),s=e.defaultValues&&!ke(e.defaultValues,t.defaultValues)&&!this.state.isTouched,i=!ke(e.defaultState,t.defaultState)&&!this.state.isTouched;(s||i||a)&&(Je((()=>{this.baseStore.setState((()=>ct(Object.assign({},this.state,i?e.defaultState:{},s?{values:e.defaultValues}:{},a?{_force_re_eval:!this.state._force_re_eval}:{}))))})),ut.emit("form-api",{id:this._formId,state:this.store.state,options:this.options}))},this.reset=(e,t)=>{const{fieldMeta:a}=this.state,s=this.resetFieldMeta(a);e&&!t?.keepDefaultValues&&(this.options={...this.options,defaultValues:e}),this.baseStore.setState((()=>ct({...this.options.defaultState,values:e??this.options.defaultValues??this.options.defaultState?.values,fieldMetaBase:s})))},this.validateAllFields=async e=>{const t=[];return Je((()=>{Object.values(this.fieldInfo).forEach((a=>{if(!a.instance)return;const s=a.instance;t.push(Promise.resolve().then((()=>s.validate(e,{skipFormValidation:!0})))),a.instance.state.meta.isTouched||a.instance.setMeta((e=>({...e,isTouched:!0})))}))})),(await Promise.all(t)).flat()},this.validateArrayFieldsStartingFrom=async(e,t,a)=>{const s=this.getFieldValue(e),i=Array.isArray(s)?Math.max(s.length-1,0):null,n=[`${e}[${t}]`];for(let a=t+1;a<=(i??0);a++)n.push(`${e}[${a}]`);const r=Object.keys(this.fieldInfo).filter((e=>n.some((t=>e.startsWith(t))))),o=[];return Je((()=>{r.forEach((e=>{o.push(Promise.resolve().then((()=>this.validateField(e,a))))}))})),(await Promise.all(o)).flat()},this.validateField=(e,t)=>{const a=this.fieldInfo[e]?.instance;return a?(a.state.meta.isTouched||a.setMeta((e=>({...e,isTouched:!0}))),a.validate(t)):[]},this.validateSync=e=>{const t=Te(e,{...this.options,form:this,validationLogic:this.options.validationLogic||st});let a=!1;const s={};return Je((()=>{for(const e of t){if(!e.validate)continue;const t=this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:i,fieldErrors:n}=ht(t),r=mt(e.cause);for(const e of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[e])continue;const t=this.getFieldMeta(e);if(!t)continue;const{errorMap:a,errorSourceMap:i}=t,o=n?.[e],{newErrorValue:l,newSource:u}=Ae({newFormValidatorError:o,isPreviousErrorFromFormValidator:"form"===i?.[r],previousErrorValue:a?.[r]});"form"===u&&(s[e]={...s[e],[r]:o}),a?.[r]!==l&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[r]:l},errorSourceMap:{...e.errorSourceMap,[r]:u}})))}this.state.errorMap?.[r]!==i&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[r]:i}}))),(i||n)&&(a=!0)}const i=mt("submit");this.state.errorMap?.[i]&&"submit"!==e&&!a&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[i]:void 0}})));const n=mt("server");this.state.errorMap?.[n]&&"server"!==e&&!a&&this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[n]:void 0}})))})),{hasErrored:a,fieldsErrorMap:s}},this.validateAsync=async e=>{const t=Oe(e,{...this.options,form:this,validationLogic:this.options.validationLogic||st});this.state.isFormValidating||this.baseStore.setState((e=>({...e,isFormValidating:!0})));const a=[];let s;for(const e of t){if(!e.validate)continue;const t=mt(e.cause),i=this.state.validationMetaMap[t];i?.lastAbortController.abort();const n=new AbortController;this.state.validationMetaMap[t]={lastAbortController:n},a.push(new Promise((async t=>{let a;try{a=await new Promise(((t,a)=>{setTimeout((async()=>{if(n.signal.aborted)return t(void 0);try{t(await this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:n.signal},type:"validateAsync"}))}catch(e){a(e)}}),e.debounceMs)}))}catch(e){a=e}const{formError:i,fieldErrors:r}=ht(a);r&&(s=s?{...s,...r}:r);const o=mt(e.cause);for(const e of Object.keys(this.state.fieldMeta)){if(void 0===this.baseStore.state.fieldMetaBase[e])continue;const t=this.getFieldMeta(e);if(!t)continue;const{errorMap:a,errorSourceMap:i}=t,n=s?.[e],{newErrorValue:r,newSource:l}=Ae({newFormValidatorError:n,isPreviousErrorFromFormValidator:"form"===i?.[o],previousErrorValue:a?.[o]});a?.[o]!==r&&this.setFieldMeta(e,(e=>({...e,errorMap:{...e.errorMap,[o]:r},errorSourceMap:{...e.errorSourceMap,[o]:l}})))}this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[o]:i}}))),t(s?{fieldErrors:s,errorMapKey:o}:void 0)})))}let i=[];const n={};if(a.length){i=await Promise.all(a);for(const e of i)if(e?.fieldErrors){const{errorMapKey:t}=e;for(const[a,s]of Object.entries(e.fieldErrors)){const e={...n[a]||{},[t]:s};n[a]=e}}}return this.baseStore.setState((e=>({...e,isFormValidating:!1}))),n},this.validate=e=>{const{hasErrored:t,fieldsErrorMap:a}=this.validateSync(e);return t&&!this.options.asyncAlways?a:this.validateAsync(e)},this.getFieldValue=e=>ge(this.state.values,e),this.getFieldMeta=e=>this.state.fieldMeta[e],this.getFieldInfo=e=>this.fieldInfo[e]||={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0,onDynamic:void 0}},this.setFieldMeta=(e,t)=>{this.baseStore.setState((a=>({...a,fieldMetaBase:{...a.fieldMetaBase,[e]:be(t,a.fieldMetaBase[e])}})))},this.resetFieldMeta=e=>Object.keys(e).reduce(((e,t)=>(e[t]=ot,e)),{}),this.setFieldValue=(e,t,a)=>{const s=a?.dontUpdateMeta??!1,i=a?.dontRunListeners??!1,n=a?.dontValidate??!1;Je((()=>{s||this.setFieldMeta(e,(e=>({...e,isTouched:!0,isDirty:!0,errorMap:{...e?.errorMap,onMount:void 0}}))),this.baseStore.setState((a=>({...a,values:ye(a.values,e,t)})))})),i||this.getFieldInfo(e).instance?.triggerOnChangeListener(),n||this.validateField(e,"change")},this.deleteField=e=>{const t=[...Object.keys(this.fieldInfo).filter((t=>{const a=e.toString();return t!==a&&t.startsWith(a)})),e];this.baseStore.setState((e=>{const a={...e};return t.forEach((e=>{a.values=function(e,t){const a=Fe(t);return function e(t){if(!t)return;if(1===a.length){const e=a[0];if(Array.isArray(t)&&"number"==typeof e)return t.filter(((t,a)=>a!==e));const{[e]:s,...i}=t;return i}const s=a.shift();if("string"==typeof s&&"object"==typeof t)return{...t,[s]:e(t[s])};if("number"==typeof s&&Array.isArray(t)){if(s>=t.length)return t;const a=t.slice(0,s);return[...a.length?a:new Array(s),e(t[s]),...t.slice(s+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}(e)}(a.values,e),delete this.fieldInfo[e],delete a.fieldMetaBase[e]})),a}))},this.pushFieldValue=(e,t,a)=>{this.setFieldValue(e,(e=>[...Array.isArray(e)?e:[],t]),a)},this.insertFieldValue=async(e,t,a,s)=>{this.setFieldValue(e,(e=>[...e.slice(0,t),a,...e.slice(t)]),Ve(s,{dontValidate:!0}));const i=s?.dontValidate??!1;i||await this.validateField(e,"change"),lt(this).handleArrayInsert(e,t),i||await this.validateArrayFieldsStartingFrom(e,t,"change")},this.replaceFieldValue=async(e,t,a,s)=>{this.setFieldValue(e,(e=>e.map(((e,s)=>s===t?a:e))),Ve(s,{dontValidate:!0})),s?.dontValidate||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.removeFieldValue=async(e,t,a)=>{const s=this.getFieldValue(e),i=Array.isArray(s)?Math.max(s.length-1,0):null;if(this.setFieldValue(e,(e=>e.filter(((e,a)=>a!==t))),Ve(a,{dontValidate:!0})),lt(this).handleArrayRemove(e,t),null!==i){const t=`${e}[${i}]`;this.deleteField(t)}a?.dontValidate||(await this.validateField(e,"change"),await this.validateArrayFieldsStartingFrom(e,t,"change"))},this.swapFieldValues=(e,t,a,s)=>{this.setFieldValue(e,(e=>{const s=e[t],i=e[a];return ye(ye(e,`${t}`,i),`${a}`,s)}),Ve(s,{dontValidate:!0})),lt(this).handleArraySwap(e,t,a),s?.dontValidate||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${a}]`,"change"))},this.moveFieldValues=(e,t,a,s)=>{this.setFieldValue(e,(e=>{const s=[...e];return s.splice(a,0,s.splice(t,1)[0]),s}),Ve(s,{dontValidate:!0})),lt(this).handleArrayMove(e,t,a),s?.dontValidate||(this.validateField(e,"change"),this.validateField(`${e}[${t}]`,"change"),this.validateField(`${e}[${a}]`,"change"))},this.clearFieldValues=(e,t)=>{const a=this.getFieldValue(e),s=Array.isArray(a)?Math.max(a.length-1,0):null;if(this.setFieldValue(e,[],Ve(t,{dontValidate:!0})),null!==s)for(let t=0;t<=s;t++){const a=`${e}[${t}]`;this.deleteField(a)}t?.dontValidate||this.validateField(e,"change")},this.resetField=e=>{this.baseStore.setState((t=>({...t,fieldMetaBase:{...t.fieldMetaBase,[e]:ot},values:this.options.defaultValues?ye(t.values,e,ge(this.options.defaultValues,e)):t.values})))},this.getAllErrors=()=>({form:{errors:this.state.errors,errorMap:this.state.errorMap},fields:Object.entries(this.state.fieldMeta).reduce(((e,[t,a])=>(Object.keys(a).length&&a.errors.length&&(e[t]={errors:a.errors,errorMap:a.errorMap}),e)),{})}),this.parseValuesWithSchema=e=>nt.validate({value:this.state.values,validationSource:"form"},e),this.parseValuesWithSchemaAsync=e=>nt.validateAsync({value:this.state.values,validationSource:"form"},e),this.timeoutIds={validations:{},listeners:{},formListeners:{}},this._formId=e?.formId??function(){let e,t=0,a="";if(!Ne||Le+16>256){for(Ne=new Array(256),t=256;t--;)Ne[t]=256*Math.random()|0;t=0,Le=0}for(;t<16;t++)e=Ne[Le+t],a+=6===t?De[15&e|64]:8===t?De[63&e|128]:De[e],1&t&&t>1&&t<11&&(a+="-");return Le++,a}(),this._devtoolsSubmissionOverride=!1,this.baseStore=new Pe(ct({...e?.defaultState,values:e?.defaultValues??e?.defaultState?.values})),this.fieldMetaDerived=new qe({deps:[this.baseStore],fn:({prevDepVals:e,currDepVals:t,prevVal:a})=>{const s=a,i=e?.[0],n=t[0];let r=0;const o={};for(const e of Object.keys(n.fieldMetaBase)){const t=n.fieldMetaBase[e],a=i?.fieldMetaBase[e],u=s?.[e],c=ge(n.values,e);let d=u?.errors;if(!a||t.errorMap!==a.errorMap){d=Object.values(t.errorMap??{}).filter((e=>void 0!==e));const a=this.getFieldInfo(e)?.instance;a&&!a.options.disableErrorFlat&&(d=d.flat(1))}const h=(l=d,!(!Array.isArray(l)||0!==l.length)),m=!t.isDirty,f=ke(c,ge(this.options.defaultValues,e))||ke(c,this.getFieldInfo(e)?.instance?.options.defaultValue);u&&u.isPristine===m&&u.isValid===h&&u.isDefaultValue===f&&u.errors===d&&t===a?(o[e]=u,r++):o[e]={...t,errors:d??[],isPristine:m,isValid:h,isDefaultValue:f}}var l;return Object.keys(n.fieldMetaBase).length&&s&&r===Object.keys(n.fieldMetaBase).length?s:o}}),this.store=new qe({deps:[this.baseStore,this.fieldMetaDerived],fn:({prevDepVals:e,currDepVals:t,prevVal:a})=>{const s=a,i=e?.[0],n=t[0],r=t[1],o=Object.values(r).filter(Boolean),l=o.some((e=>e.isValidating)),u=o.every((e=>e.isValid)),c=o.some((e=>e.isTouched)),d=o.some((e=>e.isBlurred)),h=o.every((e=>e.isDefaultValue)),m=c&&n.errorMap?.onMount,f=o.some((e=>e.isDirty)),p=!f,v=Boolean(n.errorMap?.onMount||o.some((e=>e?.errorMap?.onMount))),b=!!l;let g=s?.errors??[];i&&n.errorMap===i.errorMap||(g=Object.values(n.errorMap).reduce(((e,t)=>void 0===t?e:t&&Ie(t)?(e.push(t.form),e):(e.push(t),e)),[]));const y=0===g.length,E=u&&y,S=this.options.canSubmitWhenInvalid??!1,R=0===n.submissionAttempts&&!c&&!v||!b&&!n.isSubmitting&&E||S;let w=n.errorMap;if(m&&(g=g.filter((e=>e!==n.errorMap.onMount)),w=Object.assign(w,{onMount:void 0})),s&&i&&s.errorMap===w&&s.fieldMeta===this.fieldMetaDerived.state&&s.errors===g&&s.isFieldsValidating===l&&s.isFieldsValid===u&&s.isFormValid===y&&s.isValid===E&&s.canSubmit===R&&s.isTouched===c&&s.isBlurred===d&&s.isPristine===p&&s.isDefaultValue===h&&s.isDirty===f&&ke(i,n))return s;let C={...n,errorMap:w,fieldMeta:this.fieldMetaDerived.state,errors:g,isFieldsValidating:l,isFieldsValid:u,isFormValid:y,isValid:E,canSubmit:R,isTouched:c,isBlurred:d,isPristine:p,isDefaultValue:h,isDirty:f};const M=this.options.transform?.deps??[];if(M.length!==this.prevTransformArray.length||M.some(((e,t)=>e!==this.prevTransformArray[t]))){const e=Object.assign({},this,{state:C});this.options.transform?.fn(e),C=e.state,this.prevTransformArray=M}return C}}),this.handleSubmit=this.handleSubmit.bind(this),this.update(e||{});const t=new at((e=>ut.emit("form-state",{id:this._formId,state:e})),{wait:300}).maybeExecute;this.store.subscribe((()=>{t(this.store.state)})),ut.on("request-form-state",(e=>{e.payload.id===this._formId&&ut.emit("form-api",{id:this._formId,state:this.store.state,options:this.options})})),ut.on("request-form-reset",(e=>{e.payload.id===this._formId&&this.reset()})),ut.on("request-form-force-submit",(e=>{e.payload.id===this._formId&&(this._devtoolsSubmissionOverride=!0,this.handleSubmit(),this._devtoolsSubmissionOverride=!1)}))}get state(){return this.store.state}get formId(){return this._formId}runValidator(e){return rt(e.validate)?nt[e.type](e.value,e.validate):e.validate(e.value)}async handleSubmit(e){this.baseStore.setState((e=>({...e,isSubmitted:!1,submissionAttempts:e.submissionAttempts+1,isSubmitSuccessful:!1}))),Je((()=>{Object.values(this.fieldInfo).forEach((e=>{e.instance&&(e.instance.state.meta.isTouched||e.instance.setMeta((e=>({...e,isTouched:!0}))))}))}));const t=e??this.options.onSubmitMeta;if(!this.state.canSubmit&&!this._devtoolsSubmissionOverride)return void this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t});this.baseStore.setState((e=>({...e,isSubmitting:!0})));const a=()=>{this.baseStore.setState((e=>({...e,isSubmitting:!1})))};if(await this.validateAllFields("submit"),!this.state.isFieldsValid)return a(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),void ut.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validateAllFields",errors:Object.values(this.state.fieldMeta).map((e=>e.errors)).flat()});if(await this.validate("submit"),!this.state.isValid)return a(),this.options.onSubmitInvalid?.({value:this.state.values,formApi:this,meta:t}),void ut.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"validate",errors:this.state.errors});Je((()=>{Object.values(this.fieldInfo).forEach((e=>{e.instance?.options.listeners?.onSubmit?.({value:e.instance.state.value,fieldApi:e.instance})}))})),this.options.listeners?.onSubmit?.({formApi:this,meta:t});try{await(this.options.onSubmit?.({value:this.state.values,formApi:this,meta:t})),Je((()=>{this.baseStore.setState((e=>({...e,isSubmitted:!0,isSubmitSuccessful:!0}))),ut.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!0}),a()}))}catch(e){throw this.baseStore.setState((e=>({...e,isSubmitSuccessful:!1}))),ut.emit("form-submission",{id:this._formId,submissionAttempt:this.state.submissionAttempts,successful:!1,stage:"inflight",onError:e}),a(),e}}setErrorMap(e){Je((()=>{Object.entries(e).forEach((([e,t])=>{const a=e;if(Ie(t)){const{formError:e,fieldErrors:s}=ht(t);for(const e of Object.keys(this.fieldInfo))this.getFieldMeta(e)&&this.setFieldMeta(e,(t=>({...t,errorMap:{...t.errorMap,[a]:s?.[e]},errorSourceMap:{...t.errorSourceMap,[a]:"form"}})));this.baseStore.setState((t=>({...t,errorMap:{...t.errorMap,[a]:e}})))}else this.baseStore.setState((e=>({...e,errorMap:{...e.errorMap,[a]:t}})))}))}))}}function ht(e){return e?Ie(e)?{formError:ht(e.form).formError,fieldErrors:e.fields}:{formError:e}:{formError:void 0}}function mt(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}var ft=a(242);function pt(e,t=e=>e){return(0,ft.useSyncExternalStoreWithSelector)(e.subscribe,(()=>e.state),(()=>e.state),t,vt)}function vt(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[a,s]of e)if(!t.has(a)||!Object.is(s,t.get(a)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const a=bt(e);if(a.length!==bt(t).length)return!1;for(let s=0;s<a.length;s++)if(!Object.prototype.hasOwnProperty.call(t,a[s])||!Object.is(e[a[s]],t[a[s]]))return!1;return!0}function bt(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}class gt{constructor(e){this.options={},this.mount=()=>{const e=this.store.mount();void 0===this.options.defaultValue||this.getMeta().isTouched||this.form.setFieldValue(this.name,this.options.defaultValue,{dontUpdateMeta:!0}),this.getInfo().instance=this,this.update(this.options);const{onMount:t}=this.options.validators||{};if(t){const e=this.runValidator({validate:t,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});e&&this.setMeta((t=>({...t,errorMap:{...t?.errorMap,onMount:e},errorSourceMap:{...t?.errorSourceMap,onMount:"field"}})))}return this.options.listeners?.onMount?.({value:this.state.value,fieldApi:this}),e},this.update=e=>{this.options=e,this.name=e.name,this.state.meta.isTouched||void 0===this.options.defaultValue||ke(this.form.getFieldValue(this.name),e.defaultValue)||this.form.setFieldValue(this.name,e.defaultValue,{dontUpdateMeta:!0,dontValidate:!0,dontRunListeners:!0}),this.form.getFieldMeta(this.name)||this.form.setFieldMeta(this.name,this.state.meta)},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(e,t)=>{this.form.setFieldValue(this.name,e,Ve(t,{dontRunListeners:!0,dontValidate:!0})),t?.dontRunListeners||this.triggerOnChangeListener(),t?.dontValidate||this.validate("change")},this.getMeta=()=>this.store.state.meta,this.setMeta=e=>this.form.setFieldMeta(this.name,e),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(e,t)=>{this.form.pushFieldValue(this.name,e,Ve(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.insertValue=(e,t,a)=>{this.form.insertFieldValue(this.name,e,t,Ve(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.replaceValue=(e,t,a)=>{this.form.replaceFieldValue(this.name,e,t,Ve(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.removeValue=(e,t)=>{this.form.removeFieldValue(this.name,e,Ve(t,{dontRunListeners:!0})),t?.dontRunListeners||this.triggerOnChangeListener()},this.swapValues=(e,t,a)=>{this.form.swapFieldValues(this.name,e,t,Ve(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.moveValue=(e,t,a)=>{this.form.moveFieldValues(this.name,e,t,Ve(a,{dontRunListeners:!0})),a?.dontRunListeners||this.triggerOnChangeListener()},this.clearValues=e=>{this.form.clearFieldValues(this.name,Ve(e,{dontRunListeners:!0})),e?.dontRunListeners||this.triggerOnChangeListener()},this.getLinkedFields=e=>{const t=Object.values(this.form.fieldInfo),a=[];for(const s of t){if(!s.instance)continue;const{onChangeListenTo:t,onBlurListenTo:i}=s.instance.options.validators||{};"change"===e&&t?.includes(this.name)&&a.push(s.instance),"blur"===e&&i?.includes(this.name)&&a.push(s.instance)}return a},this.validateSync=(e,t)=>{const a=Te(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||st}),s=this.getLinkedFields(e).reduce(((t,a)=>{const s=Te(e,{...a.options,form:a.form,validationLogic:a.form.options.validationLogic||st});return s.forEach((e=>{e.field=a})),t.concat(s)}),[]);let i=!1;Je((()=>{const e=(e,a)=>{const s=Et(a.cause),n=a.validate?yt(e.runValidator({validate:a.validate,value:{value:e.store.state.value,validationSource:"field",fieldApi:e},type:"validate"})):void 0,r=t[s],{newErrorValue:o,newSource:l}=xe({formLevelError:r,fieldLevelError:n});e.state.meta.errorMap?.[s]!==o&&e.setMeta((e=>({...e,errorMap:{...e.errorMap,[s]:o},errorSourceMap:{...e.errorSourceMap,[s]:l}}))),o&&(i=!0)};for(const t of a)e(this,t);for(const t of s)t.validate&&e(t.field,t)}));const n=Et("submit");return this.state.meta.errorMap?.[n]&&"submit"!==e&&!i&&this.setMeta((e=>({...e,errorMap:{...e.errorMap,[n]:void 0},errorSourceMap:{...e.errorSourceMap,[n]:void 0}}))),{hasErrored:i}},this.validateAsync=async(e,t)=>{const a=Oe(e,{...this.options,form:this.form,validationLogic:this.form.options.validationLogic||st}),s=await t,i=this.getLinkedFields(e),n=i.reduce(((t,a)=>{const s=Oe(e,{...a.options,form:a.form,validationLogic:a.form.options.validationLogic||st});return s.forEach((e=>{e.field=a})),t.concat(s)}),[]);this.state.meta.isValidating||this.setMeta((e=>({...e,isValidating:!0})));for(const e of i)e.setMeta((e=>({...e,isValidating:!0})));const r=[],o=[],l=(e,t,a)=>{const i=Et(t.cause),n=e.getInfo().validationMetaMap[i];n?.lastAbortController.abort();const r=new AbortController;this.getInfo().validationMetaMap[i]={lastAbortController:r},a.push(new Promise((async a=>{let n;try{n=await new Promise(((a,s)=>{this.timeoutIds.validations[t.cause]&&clearTimeout(this.timeoutIds.validations[t.cause]),this.timeoutIds.validations[t.cause]=setTimeout((async()=>{if(r.signal.aborted)return a(void 0);try{a(await this.runValidator({validate:t.validate,value:{value:e.store.state.value,fieldApi:e,signal:r.signal,validationSource:"field"},type:"validateAsync"}))}catch(e){s(e)}}),t.debounceMs)}))}catch(e){n=e}if(r.signal.aborted)return a(void 0);const o=yt(n),l=s[this.name]?.[i],{newErrorValue:u,newSource:c}=xe({formLevelError:l,fieldLevelError:o});e.setMeta((e=>({...e,errorMap:{...e?.errorMap,[i]:u},errorSourceMap:{...e.errorSourceMap,[i]:c}}))),a(u)})))};for(const e of a)e.validate&&l(this,e,r);for(const e of n)e.validate&&l(e.field,e,o);let u=[];(r.length||o.length)&&(u=await Promise.all(r),await Promise.all(o)),this.setMeta((e=>({...e,isValidating:!1})));for(const e of i)e.setMeta((e=>({...e,isValidating:!1})));return u.filter(Boolean)},this.validate=(e,t)=>{if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:a}=t?.skipFormValidation?{fieldsErrorMap:{}}:this.form.validateSync(e),{hasErrored:s}=this.validateSync(e,a[this.name]??{});if(s&&!this.options.asyncAlways)return this.getInfo().validationMetaMap[Et(e)]?.lastAbortController.abort(),this.state.meta.errors;const i=t?.skipFormValidation?Promise.resolve({}):this.form.validateAsync(e);return this.validateAsync(e,i)},this.handleChange=e=>{this.setValue(e)},this.handleBlur=()=>{this.state.meta.isTouched||this.setMeta((e=>({...e,isTouched:!0}))),this.state.meta.isBlurred||this.setMeta((e=>({...e,isBlurred:!0}))),this.validate("blur"),this.triggerOnBlurListener()},this.parseValueWithSchema=e=>nt.validate({value:this.state.value,validationSource:"field"},e),this.parseValueWithSchemaAsync=e=>nt.validateAsync({value:this.state.value,validationSource:"field"},e),this.form=e.form,this.name=e.name,this.options=e,this.timeoutIds={validations:{},listeners:{},formListeners:{}},this.store=new qe({deps:[this.form.store],fn:()=>{const t=this.form.getFieldMeta(this.name)??{...ot,...e.defaultMeta};let a=this.form.getFieldValue(this.name);return t.isTouched||void 0!==a||void 0===this.options.defaultValue||ke(a,this.options.defaultValue)||(a=this.options.defaultValue),{value:a,meta:t}}})}get state(){return this.store.state}runValidator(e){return rt(e.validate)?nt[e.type](e.value,e.validate):e.validate(e.value)}setErrorMap(e){this.setMeta((t=>({...t,errorMap:{...t.errorMap,...e}})))}triggerOnBlurListener(){const e=this.form.options.listeners?.onBlurDebounceMs;e&&e>0?(this.timeoutIds.formListeners.blur&&clearTimeout(this.timeoutIds.formListeners.blur),this.timeoutIds.formListeners.blur=setTimeout((()=>{this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this})}),e)):this.form.options.listeners?.onBlur?.({formApi:this.form,fieldApi:this});const t=this.options.listeners?.onBlurDebounceMs;t&&t>0?(this.timeoutIds.listeners.blur&&clearTimeout(this.timeoutIds.listeners.blur),this.timeoutIds.listeners.blur=setTimeout((()=>{this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}),t)):this.options.listeners?.onBlur?.({value:this.state.value,fieldApi:this})}triggerOnChangeListener(){const e=this.form.options.listeners?.onChangeDebounceMs;e&&e>0?(this.timeoutIds.formListeners.change&&clearTimeout(this.timeoutIds.formListeners.change),this.timeoutIds.formListeners.change=setTimeout((()=>{this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this})}),e)):this.form.options.listeners?.onChange?.({formApi:this.form,fieldApi:this});const t=this.options.listeners?.onChangeDebounceMs;t&&t>0?(this.timeoutIds.listeners.change&&clearTimeout(this.timeoutIds.listeners.change),this.timeoutIds.listeners.change=setTimeout((()=>{this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})}),t)):this.options.listeners?.onChange?.({value:this.state.value,fieldApi:this})}}function yt(e){if(e)return e}function Et(e){switch(e){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"dynamic":return"onDynamic";default:return"onChange"}}const St="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,Rt=({children:e,...t})=>{const a=function(e){const t=(0,s.useRef)(e);t.current=e;const a=(0,s.useMemo)((()=>{const a=new gt({...t.current,form:e.form,name:e.name});return a.Field=Rt,a}),[e.form,e.name]);return St(a.mount,[a]),St((()=>{a.update(e)})),pt(a.store,"array"===e.mode?e=>[e.meta,Object.keys(e.value??[]).length]:void 0),a}(t),i=(0,s.useMemo)((()=>be(e,a)),[e,a,a.state.value,a.state.meta]);return(0,ne.jsx)(ne.Fragment,{children:i})};function wt({form:e,selector:t,children:a}){return be(a,pt(e.store,t))}function Ct(e){const t=(0,s.useId)(),[a]=(0,s.useState)((()=>{const a=new dt({...e,formId:t}),s=a;return s.Field=function(e){return(0,ne.jsx)(Rt,{...e,form:a})},s.Subscribe=function(e){return(0,ne.jsx)(wt,{form:a,selector:e.selector,children:e.children})},s}));return St(a.mount,[]),St((()=>{a.update(e)})),a}function Mt({fieldState:e,field:t,handleChange:a,disabled:s}){return React.createElement(n.ToggleControl,{checked:"enabled"===e.state.value||!0===e.state.value||1===e.state.value||"true"===e.state.value||"on"===e.state.value||"1"===e.state.value,onChange:e=>a(e),disabled:s,label:t?.label||void 0,help:t?.description||void 0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}function _t({fieldState:e,field:t,handleChange:a,trueValue:s="enabled",falseValue:i="disabled",disabled:r=!1}){const o=e.state.value===s;return React.createElement(React.Fragment,null,React.createElement(n.ToggleControl,{checked:o,onChange:e=>{a(e?s:i)},disabled:r,label:t.label,help:t?.description,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))}function Ft({fieldState:e,field:t,handleChange:a,className:s,disabled:i}){var r;return React.createElement(React.Fragment,null,React.createElement(n.SelectControl,{className:`modula_input_select ${s||""}`,value:e.state.value,options:t.options.map((e=>({label:e.label,value:e.value}))),onChange:e=>a(e),disabled:i,label:t.label,readOnly:null!==(r=t?.readonly)&&void 0!==r&&r,help:t.description,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}))}function Tt({fieldState:e,field:t,handleChange:a,disabled:s=!1}){return React.createElement(n.TextControl,{type:t.inputType||"text",value:e.state.value||"",label:t.label,placeholder:t.placeholder,onChange:e=>a(e),disabled:s,readOnly:t.readonly,help:t?.description?React.createElement("span",{dangerouslySetInnerHTML:{__html:t.description}}):null,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}function Ot({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(n.TextControl,{type:"number",className:`modula_input_text ${s||""}`,min:t.min,max:t.max,value:e.state.value,onChange:e=>a(e),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:t.label,help:t.description})}function It({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,t.label&&""!==t.label.trim()&&React.createElement("span",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.RadioControl,{className:`modula_input_radio ${s||""}`,selected:e.state.value,options:t.options.map((e=>({label:e,value:e}))),onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}function kt({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(React.Fragment,null,t.label&&""!==t.label.trim()&&React.createElement("span",{className:"modula_input_label",htmlFor:t.name},t.label),React.createElement(n.TextareaControl,{className:`modula_input_text ${s||""}`,value:e.state.value,onChange:e=>a(e)}),t.description&&React.createElement("p",{className:"modula_input_description",dangerouslySetInnerHTML:{__html:t.description}}))}const At={modulaImageRadioGroup:"mPI9gMxPjmT3bX8EvPjX",modulaImageRadioGroupOption:"pYfa6cgT72wDG4I52JZe",modulaImageRadioGroupInput:"Pr9KBKjTMZrCJ2ALikTl",modulaImageRadioGroupLabel:"YSBIOuhRLnZKqKeFMLk3",modulaImageRadioGroupLabelChecked:"o8ugI28YzRv_t52Mnc53"};function xt({fieldState:e,field:t,handleChange:a,className:s}){const{options:i,name:n}=t;return React.createElement("div",{className:`${At.modulaImageRadioGroup} ${s||""}`},i.map((t=>React.createElement("div",{key:`${t.value}-${t.label}`,className:At.modulaImageRadioGroupOption},React.createElement("input",{type:"radio",id:t.value,name:n,value:t.value,checked:e.state.value===t.value,onChange:e=>a(e.target.value),className:At.modulaImageRadioGroupInput}),React.createElement("label",{className:`${At.modulaImageRadioGroupLabel} ${e.state.value===t.value?At.modulaImageRadioGroupLabelChecked:""}`,htmlFor:t.value},t.image&&""!==t.image&&React.createElement("img",{className:At.modulaImageRadioGroupImage,src:t.image,alt:t.name}),React.createElement("p",{className:At.modulaImageRadioGroupText},t.name))))))}function Vt({fieldState:e,field:t,handleChange:a,className:s}){return React.createElement(n.RangeControl,{className:`modula_input_range ${s||""}`,initialPosition:e.state.value,value:e.state.value,onChange:e=>a(e),max:t?.max||100,min:t?.min||0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:t.label,help:t.description})}const Lt="yicsEELkvilMdkIuwRH9",Dt="B0y5RXPdEm69zuq6IoOZ";function Nt({label:e,description:t}){return React.createElement(React.Fragment,null,e&&React.createElement("span",{className:Lt},e),t&&React.createElement("div",{className:Dt,dangerouslySetInnerHTML:{__html:t}}))}function Pt({fieldState:e,field:t,handleChange:a}){const[s,r]=(0,i.useState)(t.src||null),o=()=>{const e=wp.media({title:t.mediaTitle||"Select an image",button:{text:t.mediaButtonText||"Use this image"},multiple:!1});e.on("select",(()=>{const t=e.state().get("selection").first().toJSON(),s=t.id,i=t.url;a(s),r(i)})),e.open()};return React.createElement("div",{className:"C5yLvzuPGpVkrDIaIomQ"},React.createElement(Nt,{label:t.label,description:t.description}),React.createElement("div",{className:"xw2T792lloF_e6VudTZ3"},s?React.createElement(React.Fragment,null,React.createElement("div",{className:"juh6bSXatduPIGHpzQQD"},React.createElement("img",{src:s,alt:t.label||"Selected image"})),React.createElement("div",{className:"aZIyRWYsxKBGxs16lYaM"},React.createElement(n.Button,{variant:"secondary",onClick:o},"Replace"),React.createElement(n.Button,{isDestructive:!0,variant:"link",onClick:()=>{a(null),r(null)}},"Remove"))):React.createElement("div",{className:"zj4aSopShYATrtcHe2FC"},React.createElement(n.Button,{variant:"primary",onClick:o},"Set watermark image"))))}const qt={modulaCheckboxGroupWrap:"G26WUtzESwRrAfjEdxrw",modulaCheckboxGroup:"Vh7dzBQ1lP8kfFpbtTFA",modulaCheckboxGroupControls:"SSQybBDIV8OAYj8bMjq7",controlButton:"x7O4CFe0bXBoA7IOHFIA",modulaCheckboxGroupOptions:"X9neYpywiG08remH3GVO",checkboxOption:"PURtjyCwA86PlrCJ8i45",modulaCheckboxGroupFail:"G5RwVxLhuOlxNHIqolLA"},jt=window.wp.i18n;function Bt({fieldState:e,field:t,handleChange:a,className:s}){const{options:r,name:o}=t,l=e.state.value||[],[u,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)({}),{state:f}=h(),p=(()=>{const e=oe();return async(t={},a=!1)=>{const s=new FormData;Object.entries(t).forEach((([e,t])=>{((e,t,a)=>{Array.isArray(a)?"object"==typeof a[0]?a.forEach(((a,s)=>{Object.entries(a).forEach((([a,i])=>{e.append(`${t}[${s}][${a}]`,i)}))})):a.forEach(((a,s)=>{e.append(`${t}[${s}]`,a)})):e.append(t,a)})(s,e,t)}));try{const t=await fetch(window.ajaxurl,{method:"POST",credentials:"same-origin",body:s}),i=await t.json();return a&&await e.invalidateQueries({queryKey:["settings-tabs-query"]}),i}catch(e){throw console.error("AJAX call failed:",e),e}}})(),v=f.options?.gallery_source||"core",b=f.options?.gallery_delete_source||"keep",g=e=>l.includes(e),y=(0,i.useCallback)((()=>{const e=r.map((e=>e.value));a(e)}),[r,a]),E=(0,i.useCallback)((()=>{a([])}),[a]);return React.createElement("div",{className:`${qt.modulaCheckboxGroupWrap} ${s||""}`},React.createElement("div",{className:qt.modulaCheckboxGroup},React.createElement("div",{className:qt.modulaCheckboxGroupControls},React.createElement("button",{type:"button",onClick:y,className:qt.controlButton},(0,jt.__)("Select All","modula-best-grid-gallery")),React.createElement("button",{type:"button",onClick:E,className:qt.controlButton},(0,jt.__)("Deselect All","modula-best-grid-gallery"))),React.createElement("div",{className:qt.modulaCheckboxGroupOptions},r.map((e=>React.createElement("label",{key:e.value,className:qt.checkboxOption},React.createElement("input",{type:"checkbox",name:`${o}[]`,value:e.value,checked:g(e.value),onChange:()=>{return t=e.value,void(g(t)?a(l.filter((e=>e!==t))):a([...l,t]));var t}}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.label}}),d[e.value]&&React.createElement("span",{className:d[e.value].success?qt.modulaCheckboxGroupSuccess:qt.modulaCheckboxGroupFail,dangerouslySetInnerHTML:{__html:d[e.value].message}})))))),React.createElement(n.Button,{variant:"primary",className:`modula_field_button ${s||""}`,onClick:async()=>{c(!0);const e=[];for(const a of l){const s={action:"modula_ajax_import_images",id:a,nonce:t.nonce||!1,chunk:0,source:v},i=await p(s),n=r.find((e=>e.value===a)),o={action:"modula_importer_"+v+"_gallery_import",id:a,nonce:t.nonce,clean:b,gallery_title:n?.label||"",attachments:i.attachments,source:v},l=await p(o,!0);m((e=>({...e,[a]:{success:l.success,message:l.message||(0,jt.__)("Unknown response","modula-best-grid-gallery")}}))),l.success&&(e[a]=l.modula_gallery_id)}if(e.length>0){const a={action:"modula_importer_"+v+"_gallery_imported_update",nonce:t.nonce,clean:b,galleries:e,source:v};p(a)}c(!1)},disabled:u},u?(0,jt.__)("Migratingâ€¦","modula-best-grid-gallery"):(0,jt.__)("Migrate","modula-best-grid-gallery")))}function Qt({field:e}){return React.createElement("div",{className:"B2th62gSaDUGwxJHuoE6"},e?.label&&React.createElement("span",{className:Lt},e.label),e?.description&&React.createElement("div",{className:Dt,dangerouslySetInnerHTML:{__html:e.description}}))}const Gt=({field:e,fieldState:t,handleChange:a,disabled:s=!1})=>{const i=s||e.readonly||e.disabled;switch(e.type){case"toggle":return React.createElement(Mt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),disabled:i});case"options_toggle":return React.createElement(_t,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),trueValue:e.trueValue,falseValue:e.falseValue,disabled:i});case"select":return React.createElement(Ft,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),disabled:i});case"text":return React.createElement(Tt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),disabled:i});case"number":return React.createElement(Ot,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s),disabled:i});case"radio":return React.createElement(It,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"textarea":return React.createElement(kt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"ia_radio":return React.createElement(xt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"range_select":return React.createElement(Vt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"image_select":return React.createElement(Pt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"checkbox_group":return React.createElement(Bt,{fieldState:t,field:e,handleChange:s=>a(t,e.name,s)});case"paragraph":return React.createElement(Qt,{fieldState:t,field:e});default:return null}},$t="sAqm0q094Cmj3Fff3kKY",Ut=[{value:"ab",label:"Abkhaz"},{value:"ace",label:"Acehnese"},{value:"ach",label:"Acholi"},{value:"af",label:"Afrikaans"},{value:"sq",label:"Albanian"},{value:"alz",label:"Alur"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"awa",label:"Awadhi"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"ban",label:"Balinese"},{value:"bm",label:"Bambara"},{value:"ba",label:"Bashkir"},{value:"eu",label:"Basque"},{value:"btx",label:"Batak Karo"},{value:"bts",label:"Batak Simalungun"},{value:"bbc",label:"Batak Toba"},{value:"be",label:"Belarusian"},{value:"bem",label:"Bemba"},{value:"bn",label:"Bengali"},{value:"bew",label:"Betawi"},{value:"bho",label:"Bhojpuri"},{value:"bik",label:"Bikol"},{value:"bs",label:"Bosnian"},{value:"br",label:"Breton"},{value:"bg",label:"Bulgarian"},{value:"bua",label:"Buryat"},{value:"yue",label:"Cantonese"},{value:"ca",label:"Catalan"},{value:"ceb",label:"Cebuano"},{value:"ny",label:"Chichewa"},{value:"zh",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"cv",label:"Chuvash"},{value:"co",label:"Corsican"},{value:"crh",label:"Crimean Tatar"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Dhivehi"},{value:"din",label:"Dinka"},{value:"doi",label:"Dogri"},{value:"dov",label:"Dombe"},{value:"nl",label:"Dutch"},{value:"dz",label:"Dzongkha"},{value:"en",label:"English"},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"fj",label:"Fijian"},{value:"tl",label:"Filipino"},{value:"fi",label:"Finnish"},{value:"fr",label:"French"},{value:"fy",label:"Frisian"},{value:"ff",label:"Fulani"},{value:"gaa",label:"Ga"},{value:"gl",label:"Galician"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian Creole"},{value:"cnh",label:"Hakha Chin"},{value:"ha",label:"Hausa"},{value:"haw",label:"Hawaiian"},{value:"iw",label:"Hebrew"},{value:"hil",label:"Hiligaynon"},{value:"hi",label:"Hindi"},{value:"hmn",label:"Hmong"},{value:"hu",label:"Hungarian"},{value:"hrx",label:"Hunsrik"},{value:"is",label:"Icelandic"},{value:"ig",label:"Igbo"},{value:"ilo",label:"Ilocano"},{value:"id",label:"Indonesian"},{value:"ga",label:"Irish"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"jw",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"pam",label:"Kapampangan"},{value:"kk",label:"Kazakh"},{value:"km",label:"Khmer"},{value:"cgg",label:"Kiga"},{value:"rw",label:"Kinyarwanda"},{value:"ktu",label:"Kituba"},{value:"gom",label:"Konkani"},{value:"ko",label:"Korean"},{value:"kri",label:"Krio"},{value:"ku",label:"Kurdish (Kurmanji)"},{value:"ckb",label:"Kurdish (Sorani)"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Lao"},{value:"ltg",label:"Latgalian"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"lij",label:"Ligurian"},{value:"li",label:"Limburgish"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lmo",label:"Lombard"},{value:"lg",label:"Luganda"},{value:"luo",label:"Luo"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mai",label:"Maithili"},{value:"mak",label:"Makassar"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ms-Arab",label:"Malay (Jawi)"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"chm",label:"Meadow Mari"},{value:"mni-Mtei",label:"Meiteilon (Manipuri)"},{value:"min",label:"Minang"},{value:"lus",label:"Mizo"},{value:"mn",label:"Mongolian"},{value:"my",label:"Myanmar (Burmese)"},{value:"nr",label:"Ndebele (South)"},{value:"new",label:"Nepalbhasa (Newari)"},{value:"ne",label:"Nepali"},{value:"no",label:"Norwegian"},{value:"nus",label:"Nuer"},{value:"oc",label:"Occitan"},{value:"or",label:"Odia (Oriya)"},{value:"om",label:"Oromo"},{value:"pag",label:"Pangasinan"},{value:"pap",label:"Papiamento"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese (Brazil)"},{value:"pa",label:"Punjabi (Gurmukhi)"},{value:"pa-Arab",label:"Punjabi (Shahmukhi)"},{value:"qu",label:"Quechua"},{value:"rom",label:"Romani"},{value:"ro",label:"Romanian"},{value:"rn",label:"Rundi"},{value:"ru",label:"Russian"},{value:"sm",label:"Samoan"},{value:"sg",label:"Sango"},{value:"sa",label:"Sanskrit"},{value:"gd",label:"Scots Gaelic"},{value:"nso",label:"Sepedi"},{value:"sr",label:"Serbian"},{value:"st",label:"Sesotho"},{value:"crs",label:"Seychellois Creole"},{value:"shn",label:"Shan"},{value:"sn",label:"Shona"},{value:"scn",label:"Sicilian"},{value:"szl",label:"Silesian"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhala"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somali"},{value:"es",label:"Spanish"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"ss",label:"Swati"},{value:"sv",label:"Swedish"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"tet",label:"Tetum"},{value:"th",label:"Thai"},{value:"ti",label:"Tigrinya"},{value:"ts",label:"Tsonga"},{value:"tn",label:"Tswana"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"ak",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"},{value:"cy",label:"Welsh"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"yua",label:"Yucatec Maya"},{value:"zu",label:"Zulu"},{value:"he",label:"Hebrew"},{value:"jv",label:"Javanese"},{value:"zh-CN",label:"Chinese (Simplified)"}],Kt="ZMPDPkyGl1BKFwWkVx_T",Ht="FEexSeKU3HuErihu58qW",zt="bu6zLhTA7epwcawwTNEw";function Wt(){return React.createElement("div",{className:"CC53kBaJj9hcL4TEL723"},React.createElement("div",{className:"nio6Jnp7pdgmRsnG5bHX"}),React.createElement("div",{className:"G1T6blp9QIOq2M6H9G6Q"}),React.createElement("div",{className:"C8s2qd646oAeBjYEojyP"},React.createElement("div",{className:Kt},React.createElement("div",{className:Ht}),React.createElement("div",{className:zt}),React.createElement("div",{className:"ltTizREwU1ZI51OHBbmE"})),React.createElement("div",{className:Kt},React.createElement("div",{className:Ht}),React.createElement("div",{className:`${zt} _r83CVQL8KVXGzi8krZ6`}))),React.createElement("div",{className:"ZyCwcLpwxsobB8sMtS7l"},React.createElement("div",{className:"Ta7VWv3cHKc_a5SM1xR0"}),React.createElement("div",{className:"J1I8Eio3_X9Yvn0SOeo0"})))}function Yt(){const{data:e,isLoading:t}=he({queryKey:["ai-settings-query"],retry:1,queryFn:async()=>await fe()({path:"/modula-ai-image-descriptor/v1/ai-settings",method:"GET"})}),{state:a,dispatch:s}=h(),i=Ct({defaultValues:{modula_ai_api_key:e?.api_key||"",modula_ai_language:e?.language||"en",email:e?.readonly?.email,first_name:e?.readonly?.first_name,last_name:e?.readonly?.last_name,valid_key:e?.readonly?.valid_key}}),r=(e,t)=>{t.handleChange(e),console.error(t),s(m({...a.options,[t.name]:e}))},o=e?.readonly?.valid_key,l=o?(0,jt.sprintf)(/* translators: %s: credits left */ /* translators: %s: credits left */
(0,jt.__)("Your API key is valid and you have %s credits left","modula-best-grid-gallery"),e?.readonly?.credits):(0,jt.__)("Insert an API key","modula-best-grid-gallery");return t?React.createElement(Wt,null):React.createElement("div",{className:"oCQCrDElmdDm07U8O0g_"},!o&&React.createElement(React.Fragment,null,React.createElement("p",{className:$t},(0,jt.__)("In order to use this powerful functionality you will first need to claim your credits.","modula-best-grid-gallery")),React.createElement("p",{className:$t},(0,jt.__)('If you already have the api key, use it in the field below or click "Claim Credits" to get a new one.',"modula-best-grid-gallery"))),React.createElement(n.Flex,{gap:4,align:"flex-start"},React.createElement(n.FlexItem,{style:{flex:2}},React.createElement(i.Field,{name:"modula_ai_api_key",children:e=>React.createElement(n.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,jt.__)("API Key","modula-best-grid-gallery"),help:l,value:e.state.value,onChange:t=>r(t,e)})})),React.createElement(n.FlexItem,{style:{flex:1}},React.createElement(i.Field,{name:"modula_ai_language",children:e=>React.createElement(n.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,jt.__)("Language used to generate reports","modula-best-grid-gallery"),value:e.state.value,options:Ut,onChange:t=>r(t,e)})}))),React.createElement(n.__experimentalSpacer,{marginTop:4,marginBottom:4}),React.createElement(n.Flex,{justify:"flex-start",gap:4,className:"Ebw3DweCDnwFHPwEje3i"},!o&&React.createElement(n.Button,{variant:"link",onClick:()=>{window.open("https://wp-modula.com/my-account","_blank")}},(0,jt.__)("Claim Credits","modula-best-grid-gallery"))))}function Jt(){const[e,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1),[r,o]=(0,i.useState)(null);return React.createElement("div",null,r&&React.createElement(n.Notice,{status:r.status,isDismissible:!1,className:"modula-notice"},r.message,r.details&&React.createElement("span",null,r.details)),React.createElement("p",null,(0,jt.__)("With the latest update, we have changed the way the image information is handled, now the information is retrieved from the Media Library. If you wish to set your previous details for the gallery images, please click the below button.","modula-best-grid-gallery")),React.createElement(n.Button,{variant:"primary",isBusy:e,disabled:e,onClick:async()=>{t(!0),o(null);try{const e=await fe()({path:"/modula-ai-image-descriptor/v1/update-alts-from-image-array",method:"POST"});e.success?o({status:"success",message:e.message,details:e.data?`(${e.data.updated_images} images from ${e.data.total_galleries} galleries)`:""}):o({status:"error",message:e.message||(0,jt.__)("Failed to update gallery images.","modula-best-grid-gallery")})}catch(e){o({status:"error",message:e.message||(0,jt.__)("An error occurred while updating gallery images.","modula-best-grid-gallery")})}finally{t(!1)}}},e?(0,jt.__)("Processingâ€¦","modula-best-grid-gallery"):(0,jt.__)("Update Gallery Images","modula-best-grid-gallery")),React.createElement("div",null,React.createElement("p",null,(0,jt.__)("Clean up your database by removing all wrongfully created galleries.","modula-best-grid-gallery")),React.createElement(n.Button,{isDestructive:!0,variant:"tertiary",isBusy:a,disabled:a,onClick:async()=>{if(window.confirm((0,jt.__)("Are you sure you want to delete all trash and draft galleries? This action cannot be undone.","modula-best-grid-gallery"))){s(!0),o(null);try{const e=await fe()({path:"/modula-ai-image-descriptor/v1/cleanup-galleries",method:"POST"});e.success?o({status:"success",message:e.message,details:e.data?`(${e.data.deleted_posts} galleries and ${e.data.deleted_meta} meta entries)`:""}):o({status:"error",message:e.message||(0,jt.__)("Failed to cleanup galleries.","modula-best-grid-gallery")})}catch(e){o({status:"error",message:e.message||(0,jt.__)("An error occurred while cleaning up galleries.","modula-best-grid-gallery")})}finally{s(!1)}}}},a?(0,jt.__)("Cleaning upâ€¦","modula-best-grid-gallery"):(0,jt.__)("Cleanup database","modula-best-grid-gallery"))))}function Xt(){const e="undefined"!=typeof window&&"true"===localStorage.getItem("modulaDebug");return React.createElement(React.Fragment,null,React.createElement(Yt,null),e&&React.createElement(Jt,null))}const Zt=()=>{const e=oe();return async(t,a,s=!1)=>{try{const i=await fe()({path:t,method:a,data:{...s}});return await e.invalidateQueries({queryKey:["settings-tabs-query"]}),i}catch(e){throw console.error("Error on api call:",e),e}}};function ea({field:e,variant:t="primary"}){const[a,s]=(0,i.useState)(!1),r=Zt();return React.createElement(n.Button,{id:e.id||"",href:e.href,variant:t,onClick:async()=>{s(!0),e.api&&e.api?.path&&await r(e.api.path,e.api.method||"POST",e.api.data||{}),s(!1)},disabled:a},e.text)}const ta={disabledClass:"sKwcon1YogHrQTlAMHF3",comboFieldItem:"KFbfeIrIMBt1ihMOIAj2",small:"I477T2QptSYuJAtWhFmC",medium:"XC5AxOT3DzWXYUPlZuf4",large:"rpcjtc1XPAx_Y5ug9rIf",full:"_62JRRl6P5pgNQuLpPOZ"};function aa({option:e,field:t,form:a,handleChange:s,evaluateConditions:i}){return React.createElement(React.Fragment,null,t.fields.map(((n,r)=>{const o=i(n.conditions);if("button"===n.type)return React.createElement(ea,{key:r,field:n,disabled:!o});if(!o)return null;const l=n.size?ta[n.size]:"";return React.createElement("div",{key:n?.name||r,className:`${ta.comboFieldItem} ${l}`},React.createElement(a.Field,{name:e?`${e}.${n.name}`:n.name},(e=>React.createElement(Gt,{field:n,fieldState:e,handleChange:s,disabled:!o,description:t.description}))))})))}function sa({option:e,mainField:t,form:a,handleChange:s}){const[r,o]=(0,i.useState)(t.default),l=a.store.state.values?.activeToggle||"gallery";return t.group&&t.group!==l?null:React.createElement(React.Fragment,null,React.createElement(n.Card,{className:"v2t2efraCSCsQdV6flOp"},React.createElement(n.CardHeader,{className:"alLM7NyGM85dALdVTgpe"},React.createElement(a.Field,{key:`${t.name}-field`,name:e?`${e}.${t.name}`:t.name},(i=>React.createElement(Mt,{fieldState:i,field:t,className:"zdo3i1W9YuErxdFYBCx8",handleChange:n=>((i,n,r)=>{o(r),t.fields.forEach((t=>{const s=e?`${e}.${t.name}`:t.name;a.setFieldValue(s,r)})),s(i,n,r)})(i,t.name,n)})))),React.createElement(n.CardBody,{className:"dD8wJmwUn_Lbpl3ydaHO"},t.fields.map((t=>React.createElement("div",{key:`${t.name}-wrapper`},React.createElement(a.Field,{key:`${t.name}-field`,name:e?`${e}.${t.name}`:t.name},(e=>React.createElement(Mt,{fieldState:e,field:t,className:"qUk56YuR1pTGOXzh0omC",handleChange:a=>s(e,t.name,a),disabled:!r})))))))))}function ia({field:e}){const{label:t,desc:a,buttons:s=[]}=e;return React.createElement("div",{className:"modula_upsell_field_wrapper"},t&&React.createElement("h3",null,t),a&&React.createElement("p",{dangerouslySetInnerHTML:{__html:a}}),s.length>0&&React.createElement("div",{className:"modula_upsell_buttons_wrapper"},s.map(((e,t)=>React.createElement(n.Button,{key:t,href:e.href,variant:e.variant||"primary",target:"blank",rel:"noopener noreferrer"},e.label)))))}function na({badge:e}){return React.createElement("div",{className:"w07_KR5YF5nRqJfgTMEr"},React.createElement("p",null,(0,jt.sprintf)(/* translators: %s: plan name */ /* translators: %s: plan name */
(0,jt.__)("Feature available starting with the %s plan.","modula-best-grid-gallery"),e.charAt(0).toUpperCase()+e.slice(1))))}const ra="Uj6MBbszkSMCekip7yDQ",oa="Y8zG4z6Ug0fDpU9vTumb",la="AB2IMVuwECVNG_Fyaq8N",ua="M1k8Erj5O9wjPhV9S30l",ca="GCR1wm_sd6TzU8ls8Kew",da="PpqVMrxz1ToPF77W0fhq",ha="dItRcg_cQgnupaL4qMd9",ma="KpnID4vex8Wk2SZ6GslY",fa="JgJqElBhi_0fjNIXDZHe",pa="LyylN__93_KTmLyjODNw",va="weZh8i5sy4LWtdDQNEaE";function ba({field:e,locked:t=!1}){const{title:a,description:s,icon:r,status:o={},connect:l={},disconnect:u={},docs:c=null}=e,d=!!o.connected,h=Zt(),[m,f]=(0,i.useState)(!1),p=d?o.textConnected||"Connected":o.textDisconnected||"Not connected";return React.createElement("div",{className:oa},React.createElement("div",{className:la},React.createElement("div",{className:ua},r&&React.createElement("div",{className:"kxieXH6QFgQEMS16Ue5q"},React.createElement("img",{src:r,alt:""})),React.createElement("div",null,a&&React.createElement("h4",{className:ca},a),s&&React.createElement("p",{className:da},s))),React.createElement("span",{className:`${ha} ${d?ma:fa}`},p)),React.createElement("div",{className:pa},!d&&l?.label&&React.createElement(n.Button,{variant:"primary",href:l.href,disabled:m||l.disabled||t},l.label),d&&u?.label&&React.createElement(n.Button,{variant:"secondary",onClick:async()=>{t||u?.api?.path&&(f(!0),await h(u.api.path,u.api.method||"POST",u.api.data||{}),f(!1))},disabled:m||t},u.label),c?.href&&React.createElement("a",{className:va,href:c.href,target:"_blank",rel:"noreferrer"},c.label||"Docs")))}function ga({submenu:e,form:t}){const[a,s]=(0,i.useState)(e.options[0]?.value);return(0,i.useEffect)((()=>{t.setFieldValue("activeToggle",a)}),[a,t]),React.createElement(n.__experimentalToggleGroupControl,{className:"fJ4qkNNVOVEdi4x2SIN5",label:e.label,value:a,onChange:e=>{s(e)},isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0},e.options.map((({label:e,value:t})=>React.createElement(n.__experimentalToggleGroupControlOption,{key:t,value:t,label:e}))))}function ya({field:e,form:t,option:a,handleChange:s,evaluateConditions:r,locked:o=!1}){const{title:l,description:u,fields:c=[],oauth:d}=e,h=Zt(),[m,f]=(0,i.useState)(!1),p=!!d?.status?.connected,v=d?.status?p?d.status.textConnected||"Connected":d.status.textDisconnected||"Not connected":null;return React.createElement("div",{className:oa+" mdDKrnVgqt7BRx1ZnQje"},React.createElement("div",{className:la},React.createElement("div",{className:ua},React.createElement("div",null,l&&React.createElement("h4",{className:ca},l),u&&React.createElement("p",{className:da},u))),d?.status&&null!=v&&React.createElement("span",{className:`${ha} ${p?ma:fa}`},v)),d&&React.createElement("div",{className:pa},!p&&d.connect?.label&&React.createElement(n.Button,{variant:"primary",href:d.connect.href,disabled:m||d.connect.disabled||o},d.connect.label),p&&d.disconnect?.label&&React.createElement(n.Button,{variant:"secondary",onClick:async()=>{!o&&d?.disconnect?.api?.path&&(f(!0),await h(d.disconnect.api.path,d.disconnect.api.method||"POST",d.disconnect.api.data||{}),f(!1))},disabled:m||o},d.disconnect.label),d.docs?.href&&React.createElement("a",{className:va,href:d.docs.href,target:"_blank",rel:"noreferrer"},d.docs.label||"Docs")),React.createElement("div",{className:"EV1s0TvYcM8txznFZVQh"},c.map(((e,i)=>{if(!r(e.conditions))return null;const n=a?`${a}.${e.name}`:e.name;return React.createElement("div",{key:e?.name||i,className:"_RATl4Uj7IGbqQbNiFla"},React.createElement(t.Field,{name:n},(t=>React.createElement(Gt,{field:e,fieldState:t,handleChange:s,disabled:e.disabled||o||!1}))))}))))}function Ea(e,t,a,s){if(!a)return e;if(a.includes(".")){const[i,n]=a.split(".");t?(e[t]=e[t]||{},e[t][i]=e[t][i]||{},e[t][i][n]=null!=s?s:""):(e[i]=e[i]||{},e[i][n]=null!=s?s:"")}else t?(e[t]=e[t]||{},e[t][a]=null!=s?s:""):e[a]=null!=s?s:""}function Sa({config:e,locked:t,badge:a}){const{state:s,dispatch:i}=h(),{option:n,fields:r=[]}=e,o=Ct({defaultValues:r.reduce(((e,t)=>{switch(t.type){case"combo":t.fields.forEach((t=>{Ea(e,n,t.name,t.default)}));break;case"role":Ea(e,n,t.name,t.default),t.fields.forEach((t=>{Ea(e,n,t.name,t.default)}));break;case"button":case"paragraph":case"oauth":case"credentials_group":t.fields?.forEach((t=>{Ea(e,n,t.name,t.default)}));break;default:Ea(e,n,t.name,t.default)}return e}),{})}),l=o.store.state.values,u=n?l[n]||{}:l,c=(e,t)=>{i(m({...s.options,[e]:t}))},d={"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,">":(e,t)=>e>t,"<":(e,t)=>e<t,">=":(e,t)=>e>=t,"<=":(e,t)=>e<=t},f=e=>!e||e.every((({field:e,comparison:t,value:a})=>{const s=e.split(".");let i=u;for(const e of s)i=i?.[e];return d[t](null!=i?i:null,a)})),p=(e,t,a)=>{e.handleChange(a);const s=o.store.state.values,i=n?{...s[n]}:{...s};if(t.includes(".")){const[e,s]=t.split(".");i[e]=i[e]||{},i[e][s]=a}else i[t]=a;if(n)c(n,i);else if(t.includes(".")){const[e]=t.split(".");c(e,i[e])}else c(t,a)},v=pt(o.store,(e=>e.values.activeToggle))||"";if(!e||!r)return React.createElement("p",null,"Loading settings...");if(0===r.length)return React.createElement("div",null,"âš™ï¸ No settings found.");const b="modula_roles"===e.option?"rA5uduylYDUymSNQWOla":"";return React.createElement(React.Fragment,null,e.submenu&&React.createElement(ga,{form:o,submenu:e.submenu}),React.createElement("form",{className:`${ra} ${b}`},t&&React.createElement(na,{badge:a}),r.map(((e,t)=>{const s=!!e.locked,i=e.badge||a;return f(e.conditions)?"role"===e.type?React.createElement(sa,{key:e?.name||t,option:n,mainField:e,form:o,handleChange:p}):e.group&&e.group!==v?null:"modula_ai"===e.type?React.createElement(Xt,{key:e?.name||t}):"combo"===e.type?React.createElement("div",{key:e?.name||t,className:ra+" CwvXAlD06APdCWfcC3MK"},React.createElement(aa,{option:n,field:e,form:o,handleChange:p,evaluateConditions:f}),s&&React.createElement(na,{badge:i})):"button"===e.type?React.createElement("div",{key:e?.name||t,className:ra},React.createElement(ea,{field:e}),s&&React.createElement(na,{badge:i})):"paragraph"===e.type?React.createElement("div",{key:e?.name||t,className:ra},React.createElement(Qt,{field:e}),s&&React.createElement(na,{badge:i})):"upsell"===e.type?React.createElement(ia,{key:e?.name||t,field:e}):"oauth"===e.type?React.createElement("div",{key:e?.name||t,className:ra},React.createElement(ba,{field:e,locked:s,badge:i}),s&&React.createElement(na,{badge:i})):"credentials_group"===e.type?React.createElement("div",{key:e?.name||t,className:ra},React.createElement(ya,{field:e,form:o,option:n,handleChange:p,evaluateConditions:f,locked:s,badge:i}),s&&React.createElement(na,{badge:i})):React.createElement("div",{key:e?.name||t,className:""+(e.disabled?"lQF5WZNAczCivX7GDH_D":"")},React.createElement("div",{className:ra},React.createElement(o.Field,{name:n?`${n}.${e.name}`:e.name},(t=>React.createElement(Gt,{field:e,fieldState:t,handleChange:p,disabled:e.disabled||s||!1}))),s&&React.createElement(na,{badge:i}))):null}))))}var Ra=class extends W{#c;#ie;#ne;#d;constructor(e){super(),this.#c=e.client,this.mutationId=e.mutationId,this.#ne=e.mutationCache,this.#ie=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#ie.includes(e)||(this.#ie.push(e),this.clearGcTimeout(),this.#ne.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#ie=this.#ie.filter((t=>t!==e)),this.scheduleGc(),this.#ne.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#ie.length||("pending"===this.state.status?this.scheduleGc():this.#ne.remove(this))}continue(){return this.#d?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#f({type:"continue"})},a={client:this.#c,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#d=z({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#ne.canRun(this)});const s="pending"===this.state.status,i=!this.#d.canStart();try{if(s)t();else{this.#f({type:"pending",variables:e,isPaused:i}),await(this.#ne.config.onMutate?.(e,this,a));const t=await(this.options.onMutate?.(e,a));t!==this.state.context&&this.#f({type:"pending",context:t,variables:e,isPaused:i})}const n=await this.#d.start();return await(this.#ne.config.onSuccess?.(n,e,this.state.context,this,a)),await(this.options.onSuccess?.(n,e,this.state.context,a)),await(this.#ne.config.onSettled?.(n,null,this.state.variables,this.state.context,this,a)),await(this.options.onSettled?.(n,null,e,this.state.context,a)),this.#f({type:"success",data:n}),n}catch(t){try{throw await(this.#ne.config.onError?.(t,e,this.state.context,this,a)),await(this.options.onError?.(t,e,this.state.context,a)),await(this.#ne.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,a)),await(this.options.onSettled?.(void 0,t,e,this.state.context,a)),t}finally{this.#f({type:"error",error:t})}}finally{this.#ne.runNext(this)}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Q.batch((()=>{this.#ie.forEach((t=>{t.onMutationUpdate(e)})),this.#ne.notify({mutation:this,type:"updated",action:e})}))}},wa=class extends f{#c;#y=void 0;#re;#oe;constructor(e,t){super(),this.#c=e,this.setOptions(t),this.bindMethods(),this.#le()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#c.defaultMutationOptions(e),I(this.options,t)||this.#c.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#re,observer:this}),t?.mutationKey&&this.options.mutationKey&&_(t.mutationKey)!==_(this.options.mutationKey)?this.reset():"pending"===this.#re?.state.status&&this.#re.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#re?.removeObserver(this)}onMutationUpdate(e){this.#le(),this.#N(e)}getCurrentResult(){return this.#y}reset(){this.#re?.removeObserver(this),this.#re=void 0,this.#le(),this.#N()}mutate(e,t){return this.#oe=t,this.#re?.removeObserver(this),this.#re=this.#c.getMutationCache().build(this.#c,this.options),this.#re.addObserver(this),this.#re.execute(e)}#le(){const e=this.#re?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#y={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#N(e){Q.batch((()=>{if(this.#oe&&this.hasListeners()){const t=this.#y.variables,a=this.#y.context,s={client:this.#c,meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===e?.type?(this.#oe.onSuccess?.(e.data,t,a,s),this.#oe.onSettled?.(e.data,null,t,a,s)):"error"===e?.type&&(this.#oe.onError?.(e.error,t,a,s),this.#oe.onSettled?.(void 0,e.error,t,a,s))}this.listeners.forEach((e=>{e(this.#y)}))}))}};function Ca(){const{state:e,dispatch:t}=h(),a=(()=>{const e=oe();return function(e){const t=oe(void 0),[a]=s.useState((()=>new wa(t,e)));s.useEffect((()=>{a.setOptions(e)}),[a,e]);const i=s.useSyncExternalStore(s.useCallback((e=>a.subscribe(Q.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),n=s.useCallback(((e,t)=>{a.mutate(e,t).catch(g)}),[a]);if(i.error&&q(a.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:n,mutateAsync:i.mutate}}({mutationFn:async e=>await(async e=>await fe()({path:"/modula-best-grid-gallery/v1/general-settings",method:"POST",data:e}))(e),onSuccess:async()=>{await Promise.all([e.invalidateQueries({queryKey:["settings-tabs-query"]}),e.invalidateQueries({queryKey:["ai-settings-query"]})])}})})(),[r,o]=(0,i.useState)(!1),l=0===Object.keys(e.options||{}).length;return(0,i.useEffect)((()=>{if(r){const e=setTimeout((()=>o(!1)),3e3);return()=>clearTimeout(e)}}),[r]),React.createElement("div",{className:"FiY51rBlmjTocTgrpJmQ"},React.createElement(n.Button,{onClick:()=>{a.mutate(e.options,{onSuccess:()=>{t(m({})),o(!0)}})},disabled:a.isLoading||l,variant:"primary"},a.isLoading?(0,jt.__)("Savingâ€¦","modula-best-grid-gallery"):(0,jt.__)("Save","modula-best-grid-gallery")),r&&React.createElement("div",{className:"rZvcCITxolVdOqiuj24R i_bI8pGEgrEsttD3cAT5"},(0,jt.__)("Settings saved successfully!","modula-best-grid-gallery")))}const Ma={pageContent:"qNW_zmTb3NUoWlvbYk3r",accordionWrapper:"oj77RRX29OooN4a1TS3X",last:"eqCUVlXmIzsMGvvkltDF",proBadge:"M5s5kgeQtvy8YqDDIG0H",accordionTitle:"TsIOZH410Db6b7ji8cba",triangleIcon:"zW33_tNYc_YbpjeOSOgi"};function _a(){const{state:e}=h(),{data:t,isLoading:a}=pe();if(!t||a)return null;const s=t.find((t=>t.slug===e.activeTab));return s&&s.subtabs?React.createElement("div",{className:Ma.pageContent},Object.entries(s.subtabs).map((([e,t])=>t&&0!==Object.keys(t).length?React.createElement(n.Panel,{className:Ma.accordionWrapper,key:e,header:React.createElement("span",{className:Ma.accordionTitle},React.createElement("span",null,t.label),t.badge&&React.createElement("span",{className:Ma.proBadge}," ",t.badge," "))},React.createElement(n.PanelBody,{className:Ma.accordionPannel,key:e,initialOpen:!0},React.createElement(Sa,{config:t?.config||{},locked:t?.locked||!1,badge:t?.badge||""}),(e=>!0!==e?.locked&&!0!==e?.config?.remove_button)(t)&&React.createElement(Ca,null))):null))):null}const Fa={pageHeader:"naSiRptScq1iD3gYS6po"},Ta=a.p+"images/modula-logo-black.b8db07a1.webp";function Oa(){return React.createElement(React.Fragment,null,React.createElement("div",{className:Fa.pageHeader},React.createElement("div",{className:Fa.logoContainer},React.createElement("img",{src:Ta,alt:"modula logo",className:Fa.logo}))))}function Ia(){return React.createElement(React.Fragment,null,React.createElement(Oa,null),React.createElement(ve,null),React.createElement(_a,null))}var ka=class extends f{constructor(e={}){super(),this.config=e,this.#ue=new Map}#ue;build(e,t,a){const s=t.queryKey,i=t.queryHash??M(s,t);let n=this.get(i);return n||(n=new Y({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:a,defaultOptions:e.getQueryDefaults(s)}),this.add(n)),n}add(e){this.#ue.has(e.queryHash)||(this.#ue.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#ue.get(e.queryHash);t&&(e.destroy(),t===e&&this.#ue.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#ue.get(e)}getAll(){return[...this.#ue.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>w(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>w(e,t))):t}notify(e){Q.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){Q.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){Q.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},Aa=class extends f{constructor(e={}){super(),this.config=e,this.#ce=new Set,this.#de=new Map,this.#he=0}#ce;#de;#he;build(e,t,a){const s=new Ra({client:e,mutationCache:this,mutationId:++this.#he,options:e.defaultMutationOptions(t),state:a});return this.add(s),s}add(e){this.#ce.add(e);const t=xa(e);if("string"==typeof t){const a=this.#de.get(t);a?a.push(e):this.#de.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#ce.delete(e)){const t=xa(e);if("string"==typeof t){const a=this.#de.get(t);if(a)if(a.length>1){const t=a.indexOf(e);-1!==t&&a.splice(t,1)}else a[0]===e&&this.#de.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=xa(e);if("string"==typeof t){const a=this.#de.get(t),s=a?.find((e=>"pending"===e.state.status));return!s||s===e}return!0}runNext(e){const t=xa(e);if("string"==typeof t){const a=this.#de.get(t)?.find((t=>t!==e&&t.state.isPaused));return a?.continue()??Promise.resolve()}return Promise.resolve()}clear(){Q.batch((()=>{this.#ce.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#ce.clear(),this.#de.clear()}))}getAll(){return Array.from(this.#ce)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>C(t,e)))}findAll(e={}){return this.getAll().filter((t=>C(e,t)))}notify(e){Q.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return Q.batch((()=>Promise.all(e.map((e=>e.continue().catch(g))))))}};function xa(e){return e.options.scope?.id}function Va(e){return{onFetch:(t,a)=>{const s=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,n=t.state.data?.pages||[],r=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let a=!1;const u=P(t.options,t.fetchOptions),c=async(e,s,i)=>{if(a)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const n=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:s,direction:i?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?a=!0:t.signal.addEventListener("abort",(()=>{a=!0})),t.signal)}),e})(),r=await u(n),{maxPages:o}=t.options,l=i?D:L;return{pages:l(e.pages,r,o),pageParams:l(e.pageParams,s,o)}};if(i&&n.length){const e="backward"===i,t={pages:n,pageParams:r},a=(e?Da:La)(s,t);o=await c(t,a,e)}else{const t=e??n.length;do{const e=0===l?r[0]??s.initialPageParam:La(s,o);if(l>0&&null==e)break;o=await c(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a):t.fetchFn=u}}}function La(e,{pages:t,pageParams:a}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function Da(e,{pages:t,pageParams:a}){return t.length>0?e.getPreviousPageParam?.(t[0],t,a[0],a):void 0}const Na=new class{#me;#ne;#h;#fe;#pe;#ve;#be;#ge;constructor(e={}){this.#me=e.queryCache||new ka,this.#ne=e.mutationCache||new Aa,this.#h=e.defaultOptions||{},this.#fe=new Map,this.#pe=new Map,this.#ve=0}mount(){this.#ve++,1===this.#ve&&(this.#be=j.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#me.onFocus())})),this.#ge=G.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#me.onOnline())})))}unmount(){this.#ve--,0===this.#ve&&(this.#be?.(),this.#be=void 0,this.#ge?.(),this.#ge=void 0)}isFetching(e){return this.#me.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#ne.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#me.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),a=this.#me.build(this,t),s=a.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(S(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return this.#me.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,a){const s=this.defaultQueryOptions({queryKey:e}),i=this.#me.get(s.queryHash),n=i?.state.data,r=function(e,t){return"function"==typeof e?e(t):e}(t,n);if(void 0!==r)return this.#me.build(this,s).setData(r,{...a,manual:!0})}setQueriesData(e,t,a){return Q.batch((()=>this.#me.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,a)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#me.get(t.queryHash)?.state}removeQueries(e){const t=this.#me;Q.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const a=this.#me;return Q.batch((()=>(a.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const a={revert:!0,...t},s=Q.batch((()=>this.#me.findAll(e).map((e=>e.cancel(a)))));return Promise.all(s).then(g).catch(g)}invalidateQueries(e,t={}){return Q.batch((()=>(this.#me.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},s=Q.batch((()=>this.#me.findAll(e).filter((e=>!e.isDisabled()&&!e.isStatic())).map((e=>{let t=e.fetch(void 0,a);return a.throwOnError||(t=t.catch(g)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(s).then(g)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const a=this.#me.build(this,t);return a.isStaleByTime(S(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(g).catch(g)}fetchInfiniteQuery(e){return e.behavior=Va(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(g).catch(g)}ensureInfiniteQueryData(e){return e.behavior=Va(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return G.isOnline()?this.#ne.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#me}getMutationCache(){return this.#ne}getDefaultOptions(){return this.#h}setDefaultOptions(e){this.#h=e}setQueryDefaults(e,t){this.#fe.set(_(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#fe.values()],a={};return t.forEach((t=>{F(e,t.queryKey)&&Object.assign(a,t.defaultOptions)})),a}setMutationDefaults(e,t){this.#pe.set(_(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#pe.values()],a={};return t.forEach((t=>{F(e,t.mutationKey)&&Object.assign(a,t.defaultOptions)})),a}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#h.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=M(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===N&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#h.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#me.clear(),this.#ne.clear()}};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("modula-settings-app");e&&(0,i.createRoot)(e).render(React.createElement(le,{client:Na},React.createElement(d,null,React.createElement(Ia,null))))}))})();