"undefined"!=typeof jQuery&&(jQuery.modulaFancybox={isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isPositionCustom:function(e){return e.Thumbs&&"bottom"!==e.Thumbs.position},open:function(e,o,n){o=o||{};var t=new CustomEvent("modula_fancybox_before_open",{detail:{links:e,opts:o,index:n}});if(document.dispatchEvent(t),!this.isPositionCustom(o)||this.isMobile())return modulaFancybox.open(e,o,n);var a=o.Thumbs.position;return o=Object.assign(o,{tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container has-sidebar" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1"><div class= "fancybox__backdrop" ></div><div class="fancybox__carousel"></div><div class="fancybox__footer"></div><div class="fancybox__sidebar '+a+'"></div></div>'},Thumbs:Object.assign(o.Thumbs,{type:"classic",Carousel:{axis:"y"},parentEl:function(e){var o=e.instance.container.querySelector(".fancybox__sidebar");return o||((o=document.createElement("div")).className="fancybox__sidebar "+a,e.instance.container.appendChild(o)),o}})}),modulaFancybox.open(e,o,n)}});var modulaFancybox={open:function(e,o,n){return e.forEach((function(o,n){void 0!==o.opts.caption&&(e[n].caption=DOMPurify.sanitize(o.opts.caption)),void 0!==o.opts.thumb&&(e[n].thumb=o.opts.thumb)})),o.startIndex=n,void 0!==o.Slideshow&&(o.Slideshow.progressParentEl=function(e){return e.instance.container}),void 0!==o.Toolbar&&void 0!==o.Toolbar.items&&void 0!==o.Toolbar.items.share&&(o.Toolbar.items.share.click=function(){ModulaOpenShare()}),o.on={},o.on["*"]=function(e,o){jQuery(document).trigger("modula_fancybox_"+o.replace(/\./g,"_"),[e,this]);var n=new CustomEvent("modula_fancybox_"+o.replace(/\./g,"_"),{detail:{fancybox:e,instance:e}});document.dispatchEvent(n)},o.on["Carousel.selectSlide"]=function(e,n,t){var a=new CustomEvent("modula_fancybox_custom_Carousel_selectSlide",{detail:{fancybox:e,instance:this,index:t.index,opts:o}});document.dispatchEvent(a)},o.on["Carousel.ready Carousel.change"]=function(e,o){var n=e.options,t=void 0!==n.Slideshow&&void 0!==n.Slideshow.pauseOnHover&&n.Slideshow.pauseOnHover,a=e.plugins.Slideshow.ref;if(t&&a){e.modulaPauseOnHover||(e.modulaPauseOnHover={mouseover:null,mouseout:null,paused:!1,contentEl:null});var i=e.modulaPauseOnHover,s=e.getSlide&&e.getSlide(),u=null;(u=s&&s.contentEl?s.contentEl:document.querySelector(".modula-fancybox-container .fancybox__slide.is-selected .fancybox__content")||document.querySelector(".modula-fancybox-container .fancybox__slide .fancybox__content"))&&(i.mouseover&&i.mouseout&&i.contentEl&&(i.contentEl!==u?(i.contentEl.removeEventListener("mouseover",i.mouseover),i.contentEl.removeEventListener("mouseout",i.mouseout)):(u.removeEventListener("mouseover",i.mouseover),u.removeEventListener("mouseout",i.mouseout))),i.mouseover=function(o){var n=e.plugins.Slideshow.ref;n&&"play"==n.state&&(i.paused=!0,n.stop())},i.mouseout=function(o){var n=e.plugins.Slideshow.ref;n&&"ready"==n.state&&i.paused&&(i.paused=!1,n.start())},i.contentEl=u,u.addEventListener("mouseover",i.mouseover),u.addEventListener("mouseout",i.mouseout))}},o.on.destroy=function(e){if(e.modulaPauseOnHover){var o=e.modulaPauseOnHover;o.contentEl&&o.mouseover&&o.mouseout&&(o.contentEl.removeEventListener("mouseover",o.mouseover),o.contentEl.removeEventListener("mouseout",o.mouseout)),e.modulaPauseOnHover=null}},o.on.init=function(e){jQuery(document).trigger("modula_fancybox_lightbox_on_init",[e,this])},new ModulaFancybox(e,o)},getInstance:function(){return this}};function escapeHtml(e){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return o[e]}))}function ModulaOpenShare(){var e=ModulaFancybox.getInstance(),o=ModulaFancybox.getSlide(),n=void 0!==o.opts.image_src?o.opts.image_src:o.src,t="<div class='modula-fancybox-share'><h1>"+e.options.l10n.SHARE+"</h1><p>",a=JSON.parse(ModulaShareButtons);e.options.modulaShare.forEach((function(i,s){var u=(e.options.lightboxEmailMessage.length?e.options.lightboxEmailMessage:e.options.l10n.EMAIL).replace(/\%%gallery_link%%/g,window.location.href).replace(/\%%image_link%%/g,n),r=void 0!==o.opts.alt?o.opts.alt:"";""===r&&o.caption&&void 0!==o.caption&&(r=o.caption),t+=a[i].template({media:"image"===o.type?encodeURIComponent(n):"",modulaShareUrl:encodeURIComponent(n),descr:encodeURIComponent(r),subject:encodeURIComponent(e.options.lightboxEmailSubject),emailMessage:encodeURIComponent(u)})})),t=(t+="</p><p><input class='modula-fancybox-share__input' type='text' value='"+escapeHtml(n)+"' /></p></div>").template({url_raw:escapeHtml(n)}),new ModulaFancybox([{src:t,type:"html",width:640,height:360}],{mainClass:"modula-fancybox-container"})}function modulaAlbumsMoveCaption(){document.querySelectorAll(".fancybox__slide").forEach((function(e){var o=e.querySelector(".fancybox__content"),n=e.querySelector(".fancybox__caption");o&&n&&!o.contains(n)&&o.appendChild(n)}))}String.prototype.template=function(e){return this.replace(/\{([^\}]+)\}/g,(function(o,n){for(var t=e,a=n.split("|")[0].split("."),i=0;i<a.length;i++)if(null==(t="function"==typeof t[a[i]]?t[a[i]]():t[a[i]]))return-1!==n.indexOf("|")?n.split("|")[1]:o;return t}))},document.addEventListener("modula_fancybox_Carousel_ready",modulaAlbumsMoveCaption),document.addEventListener("modula_fancybox_Carousel_change",modulaAlbumsMoveCaption),document.addEventListener("modula_fancybox_resize",modulaAlbumsMoveCaption);